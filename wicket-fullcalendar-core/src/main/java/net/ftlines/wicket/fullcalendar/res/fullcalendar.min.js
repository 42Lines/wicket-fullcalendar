/**
 * FullCalendar v1.5.4
 * http://arshaw.com/fullcalendar/
 *
 * Use fullcalendar.css for basic styling.
 * For event drag & drop, requires jQuery UI draggable.
 * For event resizing, requires jQuery UI resizable.
 *
 * Copyright (c) 2011 Adam Shaw
 * Dual licensed under the MIT and GPL licenses, located in
 * MIT-LICENSE.txt and GPL-LICENSE.txt respectively.
 *
 * Date: Tue Sep 4 23:38:33 2012 -0700
 *
 */
!function(t,e){var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},r={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},a=t.fullCalendar={version:"1.5.4"},i=a.views={};function o(e){t.extend(!0,n,e)}t.fn.fullCalendar=function(o){if("string"==typeof o){var l,u=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t.data(this,"fullCalendar");if(n&&t.isFunction(n[o])){var r=n[o].apply(n,u);l===e&&(l=r),"destroy"==o&&t.removeData(this,"fullCalendar")}}),l!==e?l:this}var f=o.eventSources||[];return delete o.eventSources,o.events&&(f.push(o.events),delete o.events),o=t.extend(!0,{},n,o.isRTL||o.isRTL===e&&n.isRTL?r:{},o),this.each(function(n,r){var l=t(r),u=new function(n,r,o){var l=this;l.options=r,l.render=function(e){d?(q(),P(),$(),O(e)):function(){r.theme?"ui":"fc",n.addClass("fc"),r.isRTL&&n.addClass("fc-rtl");r.theme&&n.addClass("ui-widget");d=t("<div class='fc-content' style='position:relative'/>").prependTo(n),u=new function(e,n){var r=this;r.render=function(){if(a=n.theme?"ui":"fc",n.header)return o=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(s("left")).append(s("center")).append(s("right")))},r.destroy=function(){o.remove()},r.updateTitle=function(t){o.find("h2").html(t)},r.activateButton=function(t){o.find("span.fc-button-"+t).addClass(a+"-state-active")},r.deactivateButton=function(t){o.find("span.fc-button-"+t).removeClass(a+"-state-active")},r.disableButton=function(t){o.find("span.fc-button-"+t).addClass(a+"-state-disabled")},r.enableButton=function(t){o.find("span.fc-button-"+t).removeClass(a+"-state-disabled")};var a,o=t([]);function s(r){var o=t("<td class='fc-header-"+r+"'/>"),s=n.header[r];return s&&t.each(s.split(" "),function(r){var s;r>0&&o.append("<span class='fc-header-space'/>"),t.each(this.split(","),function(r,c){var l;if("title"==c)o.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(a+"-corner-right"),s=null;else if(e[c]?l=e[c]:i[c]&&(l=function(){d.removeClass(a+"-state-hover"),e.changeView(c)}),l){var u=n.theme?V(n.buttonIcons,c):null,f=V(n.buttonText,c),d=t("<a class='fc-button fc-button-"+c+" "+a+"-state-default' href='#'><span class='fc-button-inner'><span class='fc-button-content'>"+(u?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+u+"'/></span>":f)+"</span><span class='fc-button-effect'><span></span></span></span></a>");d&&(d.click(function(){d.hasClass(a+"-state-disabled")||l()}).mousedown(function(){d.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-down")}).mouseup(function(){d.removeClass(a+"-state-down")}).hover(function(){d.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-hover")},function(){d.removeClass(a+"-state-hover").removeClass(a+"-state-down")}).appendTo(o),s||d.addClass(a+"-corner-left"),s=d)}}),s&&s.addClass(a+"-corner-right")}),o}}(l,r),(f=u.render())&&n.prepend(f);_(r.defaultView),t(window).resize(X),W()||L()}()},l.destroy=function(){t(window).unbind("resize",X),u.destroy(),d.remove(),n.removeClass("fc fc-rtl ui-widget")},l.refetchEvents=U,l.reportEvents=function(t){N=t,Z()},l.reportEventChange=function(t){Z(t)},l.rerenderEvents=Z,l.changeView=_,l.select=function(t,n,r){p.select(t,n,r===e||r)},l.unselect=Q,l.prev=function(){O(-1)},l.next=function(){O(1)},l.prevYear=function(){v(R,-1),O()},l.nextYear=function(){v(R,1),O()},l.today=function(){R=new Date,O()},l.gotoDate=function(t,e,n){t instanceof Date?R=b(t):C(R,t,e,n);O()},l.incrementDate=function(t,n,r){t!==e&&v(R,t);n!==e&&h(R,n);r!==e&&g(R,r);O()},l.formatDate=function(t,e){return T(t,e,r)},l.formatDates=function(t,e,n){return k(t,e,n,r)},l.getDate=function(){return b(R)},l.getView=function(){return p},l.option=function(t,n){if(n===e)return r[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(r[t]=n,I())},l.trigger=function(t,e){if(r[t])return r[t].apply(e||x,Array.prototype.slice.call(arguments,2))},function(n,r){var i=this;i.isFetchNeeded=function(t,e){return!o||t<o||e>l},i.fetchEvents=function(t,e){o=t,l=e,y=[];var n=++g,r=h.length;p=r;for(var a=0;a<r;a++)w(h[a],n)},i.addEventSource=function(t){(t=M(t))&&(p++,w(t,g))},i.removeEventSource=function(e){h=t.grep(h,function(t){return!T(t,e)}),y=t.grep(y,function(t){return!T(t.source,e)}),d(y)},i.updateEvent=function(t){var e,n,r=y.length,a=f().defaultEventEnd,i=t.start-t._start,o=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=y[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+i),t.end?n.end?n.end=new Date(+n.end+o):n.end=new Date(+a(n)+o):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroudColor=t.backgroudColor,n.borderColor=t.borderColor,n.textColor=t.textColor,x(n));x(t),d(y)},i.renderEvent=function(t,e){x(t),t.source||(e&&(v.events.push(t),t.source=v),y.push(t));d(y)},i.removeEvents=function(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}y=t.grep(y,e,!0);for(var r=0;r<h.length;r++)t.isArray(h[r].events)&&(h[r].events=t.grep(h[r].events,e,!0))}else{y=[];for(var r=0;r<h.length;r++)t.isArray(h[r].events)&&(h[r].events=[])}d(y)},i.clientEvents=function(e){{if(t.isFunction(e))return t.grep(y,e);if(e)return e+="",t.grep(y,function(t){return t._id==e})}return y},i.normalizeEvent=x;for(var o,l,u=i.trigger,f=i.getView,d=i.reportEvents,v={events:[]},h=[v],g=0,p=0,m=0,y=[],D=0;D<r.length;D++)M(r[D]);function w(e,r){!function e(r,i){var c;var u=a.sourceFetchers;var f;for(c=0;c<u.length;c++){if(!0===(f=u[c](r,o,l,i)))return;if("object"==typeof f)return void e(f,i)}var d=r.events;if(d)t.isFunction(d)?(C(),d(b(o),b(l),function(t){i(t),E()})):t.isArray(d)?i(d):i();else{var v=r.url;if(v){var h=r.success,g=r.error,p=r.complete,m=t.extend({},r.data||{}),y=tt(r.startParam,n.startParam),D=tt(r.endParam,n.endParam);y&&(m[y]=Math.round(+o/1e3)),D&&(m[D]=Math.round(+l/1e3)),C(),t.ajax(t.extend({},s,r,{data:m,success:function(e){e=e||[];var n=K(h,this,arguments);t.isArray(n)&&(e=n),i(e)},error:function(){K(g,this,arguments),i()},complete:function(){K(p,this,arguments),E()}}))}else i()}}(e,function(t){if(r==g){if(t){for(var n=0;n<t.length;n++)t[n].source=e,x(t[n]);y=y.concat(t)}--p||d(y)}})}function M(e){if(t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e)return function(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=a.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}(e),h.push(e),e}function C(){m++||u("loading",null,!0)}function E(){--m||u("loading",null,!1)}function x(t){var r=t.source||{},a=tt(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+c++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=b(t.start=S(t.start,a)),t.end=S(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?b(t.end):null,t.allDay===e&&(t.allDay=tt(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function T(t,e){return t&&e&&k(t)==k(e)}function k(t){return("object"==typeof t?t.events||t.url:"")||t}}.call(l,r,o);var u,f,d,p,m,y,D,w,M=l.isFetchNeeded,E=l.fetchEvents,x=n[0],H={},z=0,F=0,R=new Date,N=[];function L(){setTimeout(function(){!p.start&&W()&&O()},0)}function A(){return 0!==x.offsetWidth}function W(){return 0!==t("body")[0].offsetWidth}function _(e){if(!p||e!=p.name){F++,Q();var n,r=p;r?((r.beforeHide||j)(),Y(d,d.height()),r.element.hide()):Y(d,1),d.css("overflow","hidden"),(p=H[e])?p.element.show():p=H[e]=new i[e](n=D=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(d),l),r&&u.deactivateButton(r.name),u.activateButton(e),O(),d.css("overflow",""),r&&Y(d,1),n||(p.afterShow||j)(),F--}}function O(t){if(A()){F++,Q(),y===e&&q();var a=!1;!p.start||t||R<p.start||R>=p.end?(p.render(R,t||0),J(!0),a=!0):p.sizeDirty?(p.clearEvents(),J(),a=!0):p.eventsDirty&&(p.clearEvents(),a=!0),p.sizeDirty=!1,p.eventsDirty=!1,o=a,!r.lazyFetching||M(p.visStart,p.visEnd)?U():o&&Z(),m=n.outerWidth(),u.updateTitle(p.title);var i=new Date;i>=p.start&&i<p.end?u.disableButton("today"):u.enableButton("today"),F--,p.trigger("viewDisplay",x)}var o}function I(){P(),A()&&(q(),J(),Q(),p.clearEvents(),p.renderEvents(N),p.sizeDirty=!1)}function P(){t.each(H,function(t,e){e.sizeDirty=!0})}function q(){y=r.contentHeight?r.contentHeight:r.height?r.height-(f?f.height():0)-B(d):Math.round(d.width()/Math.max(r.aspectRatio,.5))}function J(t){F++,p.setHeight(y,t),D&&(D.css("position","relative"),D=null),p.setWidth(d.width(),t),F--}function X(){if(!F)if(p.start){var t=++z;setTimeout(function(){t==z&&!F&&A()&&m!=(m=n.outerWidth())&&(F++,I(),p.trigger("windowResize",x),F--)},200)}else L()}function U(){E(p.visStart,p.visEnd)}function Z(t){$(),A()&&(p.clearEvents(),p.renderEvents(N,t),p.eventsDirty=!1)}function $(){t.each(H,function(t,e){e.eventsDirty=!0})}function Q(){p&&p.unselect()}C(R,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,i=t(a);if(!i.parents(".fc").length){var o=r.dropAccept;(t.isFunction(o)?o.call(a,i):i.is(o))&&(w=a,p.dragStart(w,e,n))}}).bind("dragstop",function(t,e){w&&(p.dragStop(w,t,e),w=null)})}(l,o,f);l.data("fullCalendar",u),u.render()}),this},a.sourceNormalizers=[],a.sourceFetchers=[];var s={dataType:"json",cache:!1},c=1;a.addDays=g,a.cloneDate=b,a.parseDate=S,a.parseISO8601=E,a.parseTime=x,a.formatDate=T,a.formatDates=k;var l=["sun","mon","tue","wed","thu","fri","sat"],u=864e5,f=36e5,d=6e4;function v(t,e,n){return t.setFullYear(t.getFullYear()+e),n||y(t),t}function h(t,e,n){if(+t){var r=t.getMonth()+e,a=b(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||y(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function g(t,e,n){if(+t){var r=t.getDate()+e,a=b(t);a.setHours(9),a.setDate(r),t.setDate(r),n||y(t),p(t,a)}return t}function p(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*f)}function m(t,e){return t.setMinutes(t.getMinutes()+e),t}function y(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function b(t,e){return e?y(new Date(+t)):new Date(+t)}function D(){var t,e=0;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function w(t,e,n){for(e=e||1;!t.getDay()||n&&1==t.getDay()||!n&&6==t.getDay();)g(t,e);return t}function M(t,e){return Math.round((b(t,!0)-b(e,!0))/u)}function C(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function S(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),E(t,n)||(t?new Date(t):null)):null}function E(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),p(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),p(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var i=60*Number(n[16])+(n[18]?Number(n[18]):0);i*="-"==n[15]?1:-1,r=new Date(+r+60*i*1e3)}return r}function x(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function T(t,e,n){return k(t,null,e,n)}function k(t,e,r,a){a=a||n;var i,o,s,c,l=t,u=e,f=r.length,d="";for(i=0;i<f;i++)if("'"==(o=r.charAt(i))){for(s=i+1;s<f;s++)if("'"==r.charAt(s)){l&&(d+=s==i+1?"'":r.substring(i+1,s),i=s);break}}else if("("==o){for(s=i+1;s<f;s++)if(")"==r.charAt(s)){var v=T(l,r.substring(i+1,s),a);parseInt(v.replace(/\D/,""),10)&&(d+=v),i=s;break}}else if("["==o){for(s=i+1;s<f;s++)if("]"==r.charAt(s)){var h=r.substring(i+1,s);(v=T(l,h,a))!=T(u,h,a)&&(d+=v),i=s;break}}else if("{"==o)l=e,u=t;else if("}"==o)l=t,u=e;else{for(s=f;s>i;s--)if(c=H[r.substring(i,s)]){l&&(d+=c(l,a)),i=s-1;break}s==i&&l&&(d+=o)}return d}var H={s:function(t){return t.getSeconds()},ss:function(t){return J(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return J(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return J(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return J(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return J(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return J(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return T(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"}};function z(t){return t.end?(e=t.end,n=t.allDay,e=b(e),n||e.getHours()||e.getMinutes()?g(e,1):y(e)):g(b(t.start),1);var e,n}function F(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function R(t,e){return t.end>e.start&&t.start<e.end}function N(t,e,n,r){var a,i,o,s,c,l,u,f,d=[],v=t.length;for(a=0;a<v;a++)o=(i=t[a]).start,(s=e[a])>n&&o<r&&(o<n?(c=b(n),u=!1):(c=o,u=!0),s>r?(l=b(r),f=!1):(l=s,f=!0),d.push({event:i,start:c,end:l,isStart:u,isEnd:f,msLength:l-c}));return d.sort(F)}function L(t){var e,n,r,a,i,o=[],s=t.length;for(e=0;e<s;e++){for(n=t[e],r=0;;){if(a=!1,o[r])for(i=0;i<o[r].length;i++)if(R(o[r][i],n)){a=!0;break}if(!a)break;r++}o[r]?o[r].push(n):o[r]=[n]}return o}function A(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var i,o,s,c=n.target;c!=this;)i=c,c=c.parentNode;(o=i._fci)!==e&&(i._fci=e,s=r[o],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function W(e,n,r){for(var a,i=0;i<e.length;i++)(a=t(e[i])).width(Math.max(0,n-O(a,r)))}function _(e,n,r){for(var a,i=0;i<e.length;i++)(a=t(e[i])).height(Math.max(0,n-B(a,r)))}function O(e,n){return i=e,(parseFloat(t.css(i[0],"paddingLeft",!0))||0)+(parseFloat(t.css(i[0],"paddingRight",!0))||0)+(a=e,(parseFloat(t.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(a[0],"borderRightWidth",!0))||0))+(n?(r=e,(parseFloat(t.css(r[0],"marginLeft",!0))||0)+(parseFloat(t.css(r[0],"marginRight",!0))||0)):0);var r,a,i}function B(e,n){return a=e,(parseFloat(t.css(a[0],"paddingTop",!0))||0)+(parseFloat(t.css(a[0],"paddingBottom",!0))||0)+(r=e,(parseFloat(t.css(r[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(r[0],"borderBottomWidth",!0))||0))+(n?I(e):0);var r,a}function I(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function Y(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,n){n.style.cssText+=";min-height:"+e+";_height:"+e})}function j(){}function P(t,e){return t-e}function q(t){return Math.max.apply(Math,t)}function J(t){return(t<10?"0":"")+t}function V(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),i=a.length-1;i>=0;i--)if((r=t[a[i].toLowerCase()])!==e)return r;return t[""]}function X(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function U(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function Z(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function $(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Q(t,e){t.each(function(t,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+l[e.getDay()])})}function G(t,e){var n=t.source||{},r=t.color,a=n.color,i=e("eventColor"),o=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||i,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||i,c=t.textColor||n.textColor||e("eventTextColor"),l=[];return o&&l.push("background-color:"+o),s&&l.push("border-color:"+s),c&&l.push("color:"+c),l.join(";")}function K(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,i;for(a=0;a<e.length;a++)i=e[a].apply(n,r)||i;return i}}function tt(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function et(e,n,r){var a=this;a.renderBasic=function(n,r,v,h){p=r,m=v,function(){(S=R("isRTL"))?(E=-1,x=m-1):(E=1,x=0);T=R("firstDay"),k=R("weekends")?0:1,H=R("theme")?"ui":"fc",F=R("columnFormat")}();var g=!s;g?function(n,r){var a,v,h,g,p=H+"-widget-header",y=H+"-widget-content";for(a="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",v=0;v<m;v++)a+="<th class='fc- "+p+"'/>";for(a+="</tr></thead><tbody>",v=0;v<n;v++){for(a+="<tr class='fc-week"+v+"'>",h=0;h<m;h++)a+="<td class='fc- "+y+" fc-day"+(v*m+h)+"'><div>"+(r?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";a+="</tr>"}g=t(a+="</tbody></table>").appendTo(e),i=g.find("thead"),o=i.find("th"),s=g.find("tbody"),c=s.find("tr"),l=s.find("td"),u=l.filter(":first-child"),f=c.eq(0).find("div.fc-day-content div"),$(i.add(i.find("tr"))),$(c),c.eq(0).addClass("fc-first"),q(l),d=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}(n,h):_();!function(e){var n,r,i,s=e||1==p,u=a.start.getMonth(),f=y(new Date);s&&o.each(function(e,a){n=t(a),r=tt(e),n.html(P(r,F)),Q(n,r)});l.each(function(e,a){n=t(a),(r=tt(e)).getMonth()==u?n.removeClass("fc-other-month"):n.addClass("fc-other-month"),+r==+f?n.addClass(H+"-state-highlight fc-today"):n.removeClass(H+"-state-highlight fc-today"),n.find("div.fc-day-number").text(r.getDate()),s&&Q(n,r)}),c.each(function(e,n){i=t(n),e<p?(i.show(),e==p-1?i.addClass("fc-last"):i.removeClass("fc-last")):i.hide()})}(g)},a.setHeight=function(e){var n,r,a,o=e-i.height();"variable"==R("weekMode")?n=r=Math.floor(o/(1==p?2:6)):(n=Math.floor(o/p),r=o-n*(p-1));u.each(function(e,i){e<p&&Y((a=t(i)).find("> div"),(e==p-1?r:n)-B(a))})},a.setWidth=function(t){v=t,C.clear(),h=Math.floor(v/m),W(o.slice(0,-1),h)},a.renderDayOverlay=V,a.defaultSelectionEnd=function(t,e){return b(t)},a.renderSelection=function(t,e,n){V(t,g(b(e),1),!0)},a.clearSelection=function(){I()},a.reportDayClick=function(t,e,n){var r=U(t),a=l[r.row*m+r.col];A("dayClick",a,t,e,n)},a.dragStart=function(t,e,n){w.start(function(t){I(),t&&X(t.row,t.col,t.row,t.col)},e)},a.dragStop=function(t,e,n){var r=w.stop();if(I(),r){var a=G(r);A("drop",t,a,!0,e,n)}},a.defaultEventEnd=function(t){return b(t.start)},a.getHoverListener=function(){return w},a.colContentLeft=function(t){return C.left(t)},a.colContentRight=function(t){return C.right(t)},a.dayOfWeekCol=et,a.dateCell=U,a.cellDate=G,a.cellIsAllDay=function(){return!0},a.allDayRow=function(t){return c.eq(t)},a.allDayBounds=function(t){return{left:0,right:v}},a.getRowCnt=function(){return p},a.getColCnt=function(){return m},a.getColWidth=function(){return h},a.getDaySegmentContainer=function(){return d},at.call(a,e,n,r),st.call(a),ot.call(a),function(){var e=this;e.renderEvents=function(t,e){o(t),D(M(t),e)},e.compileDaySegs=M,e.clearEvents=function(){s(),d().empty()},e.bindDaySeg=function(t,e,o){a(t)&&(s=t,d=e,y=v(),d.draggable({zIndex:9,delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(t,e){r("eventDragStart",d,s,t,e),u(s,d),y.start(function(t,e,r,a){d.draggable("option","revert",!t||!r&&!a),p(),t?(m=7*r+a*(n("isRTL")?-1:1),h(g(b(s.start),m),g(z(s),m))):m=0},t,"drag")},stop:function(t,e){y.stop(),p(),r("eventDragStop",d,s,t,e),m?f(this,s,m,0,s.allDay,t,e):(d.css("filter",""),l(s,d))}}));var s,d,m,y;o.isEnd&&i(t)&&w(t,e,o);c(t,e)},it.call(e);var n=e.opt,r=e.trigger,a=e.isEventDraggable,i=e.isEventResizable,o=e.reportEvents,s=e.reportEventClear,c=e.eventElementHandlers,l=e.showEvents,u=e.hideEvents,f=e.eventDrop,d=e.getDaySegmentContainer,v=e.getHoverListener,h=e.renderDayOverlay,p=e.clearOverlays,m=e.getRowCnt,y=e.getColCnt,D=e.renderDaySegs,w=e.resizableDayEvent;function M(n){var r,a,i,o,s,c,l=m(),u=y(),f=b(e.visStart),d=g(b(f),u),v=t.map(n,z),h=[];for(r=0;r<l;r++){for(a=L(N(n,v,f,d)),i=0;i<a.length;i++)for(o=a[i],s=0;s<o.length;s++)(c=o[s]).row=r,c.level=i,h.push(c);g(f,7),g(d,7)}return h}}.call(a);var i,o,s,c,l,u,f,d,v,h,p,m,D,w,C,S,E,x,T,k,H,F,R=a.opt,A=a.trigger,_=a.clearEvents,O=a.renderOverlay,I=a.clearOverlays,j=a.daySelectionMousedown,P=n.formatDate;function q(t){t.click(J).mousedown(j)}function J(t){if(!R("selectable")){var e=tt(parseInt(this.className.match(/fc\-day(\d+)/)[1]));A("dayClick",this,e,!0,t)}}function V(t,e,n){n&&D.build();for(var r=b(a.visStart),i=g(b(r),m),o=0;o<p;o++){var s,c,l=new Date(Math.max(r,t)),u=new Date(Math.min(i,e));if(l<u)S?(s=M(u,r)*E+x+1,c=M(l,r)*E+x+1):(s=M(l,r),c=M(u,r)),q(X(o,s,o,c-1));g(r,7),g(i,7)}}function X(t,n,r,a){var i=D.rect(t,n,r,a,e);return O(i,e)}function U(t){return{row:Math.floor(M(t,a.visStart)/7),col:et(t.getDay())}}function G(t){return K(t.row,t.col)}function K(t,e){return g(b(a.visStart),7*t+e*E+x)}function tt(t){return K(Math.floor(t/m),t%m)}function et(t){return(t-Math.max(T,k)+m)%m*E+x}Z(e.addClass("fc-grid")),D=new ct(function(e,n){var r,a,i;o.each(function(e,o){r=t(o),a=r.offset().left,e&&(i[1]=a),i=[a],n[e]=i}),i[1]=a+r.outerWidth(),c.each(function(n,o){n<p&&(r=t(o),a=r.offset().top,n&&(i[1]=a),i=[a],e[n]=i)}),i[1]=a+r.outerHeight()}),w=new lt(D),C=new ut(function(t){return f.eq(t)})}function nt(n,r,a){var i=this;i.renderAgenda=function(e){nt=e,gt=St("theme")?"ui":"fc",mt=St("weekends")?0:1,pt=St("firstDay"),(yt=St("isRTL"))?(bt=-1,Dt=nt-1):(bt=1,Dt=0),wt=x(St("minTime")),Mt=x(St("maxTime")),Ct=St("columnFormat"),o?xt():function(){var e,r,a,i,d,g=gt+"-widget-header",y=gt+"-widget-content",M=St("slotMinutes")%15==0;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+g+"'>&nbsp;</th>",r=0;r<nt;r++)e+="<th class='fc- fc-col"+r+" "+g+"'/>";for(e+="<th class='fc-agenda-gutter "+g+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+g+"'>&nbsp;</th>",r=0;r<nt;r++)e+="<td class='fc- fc-col"+r+" "+y+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";o=t(e+="<td class='fc-agenda-gutter "+y+"'>&nbsp;</td></tr></tbody></table>").appendTo(n),s=o.find("thead"),c=s.find("th").slice(1,-1),l=o.find("tbody"),u=l.find("td").slice(0,-1),f=u.find("div.fc-day-content div"),v=u.eq(0),h=v.find("> div"),$(s.add(s.find("tr"))),$(l.add(l.find("tr"))),R=s.find("th:first"),I=o.find(".fc-agenda-gutter"),p=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),St("allDaySlot")?(w=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(p),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+g+" fc-agenda-axis'>"+St("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+g+" fc-agenda-gutter'>&nbsp;</th></tr></table>",C=t(e).appendTo(p),At((S=C.find("tr")).find("td")),R=R.add(C.find("th:first")),I=I.add(C.find("th.fc-agenda-gutter")),p.append("<div class='fc-agenda-divider "+g+"'><div class='fc-agenda-divider-inner'/></div>")):w=t([]);for(E=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(p),T=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(E),k=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(T),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=D(),i=m(b(a),Mt),m(a,wt),ft=0,r=0;a<i;r++)d=a.getMinutes(),e+="<tr class='fc-slot"+r+" "+(d?"fc-minor":"")+"'><th class='fc-agenda-axis "+g+"'>"+(M&&d?"&nbsp;":Nt(a,St("axisFormat")))+"</th><td class='"+y+"'><div style='position:relative'>&nbsp;</div></td></tr>",m(a,St("slotMinutes")),ft++;H=t(e+="</tbody></table>").appendTo(T),F=H.find("div:first"),Wt(H.find("td")),R=R.add(H.find("th:first"))}();!function(){var t,e,n,r,a=y(new Date);for(t=0;t<nt;t++)r=jt(t),(e=c.eq(t)).html(Nt(r,Ct)),n=u.eq(t),+r==+a?n.addClass(gt+"-state-highlight fc-today"):n.removeClass(gt+"-state-highlight fc-today"),Q(e.add(n),r)}()},i.setWidth=function(e){j=e,ht.clear(),J=0,W(R.width("").each(function(e,n){J=Math.max(J,t(n).outerWidth())}),J);var n=E[0].clientWidth;(K=E.width()-n)?(W(I,K),I.show().prev().removeClass("fc-last")):I.hide().prev().addClass("fc-last");V=Math.floor((n-J)/nt),W(c.slice(0,-1),V)},i.setHeight=function(t,n){t===e&&(t=q);q=t,Lt={};var r=l.position().top,a=E.position().top,i=Math.min(t-r,H.height()+a+1);h.height(i-B(v)),p.css("top",r),E.height(i-a-1),tt=F.height()+1,n&&function(){var t=D(),e=b(t);e.setHours(St("firstHour"));var n=Jt(t,e)+1;function r(){E.scrollTop(n)}r(),setTimeout(r,0)}()},i.beforeHide=function(){et=E.scrollTop()},i.afterShow=function(){E.scrollTop(et)},i.defaultEventEnd=function(t){var e=b(t.start);if(t.allDay)return e;return m(e,St("defaultEventMinutes"))},i.timePosition=Jt,i.dayOfWeekCol=qt,i.dateCell=function(t){return{row:Math.floor(M(t,i.visStart)/7),col:qt(t.getDay())}},i.cellDate=Yt,i.cellIsAllDay=Pt,i.allDayRow=function(t){return S},i.allDayBounds=function(){return{left:J,right:j-K}},i.getHoverListener=function(){return vt},i.colContentLeft=function(t){return ht.left(t)},i.colContentRight=function(t){return ht.right(t)},i.getDaySegmentContainer=function(){return w},i.getSlotSegmentContainer=function(){return k},i.getMinMinute=function(){return wt},i.getMaxMinute=function(){return Mt},i.getBodyContent=function(){return T},i.getRowCnt=function(){return 1},i.getColCnt=function(){return nt},i.getColWidth=function(){return V},i.getSlotHeight=function(){return tt},i.defaultSelectionEnd=function(t,e){if(e)return b(t);return m(b(t),St("slotMinutes"))},i.renderDayOverlay=Ot,i.renderSelection=function(t,e,n){n?St("allDaySlot")&&Ot(t,g(b(e),1),!0):Vt(t,e)},i.clearSelection=Xt,i.reportDayClick=Zt,i.dragStart=function(t,e,n){vt.start(function(t){if(kt(),t)if(Pt(t))Bt(t.row,t.col,t.row,t.col);else{var e=Yt(t),n=m(b(e),St("defaultEventMinutes"));It(e,n)}},e)},i.dragStop=function(t,e,n){var r=vt.stop();kt(),r&&Et("drop",t,Yt(r),Pt(r),e,n)},at.call(i,n,r,a),st.call(i),ot.call(i),function(){var n=this;n.renderEvents=function(i,o){c(i);var s,l=i.length,u=[],d=[];for(s=0;s<l;s++)i[s].allDay?u.push(i[s]):d.push(i[s]);r("allDaySlot")&&(S(Z(u),o),f());!function(n,i){var o,s,c,l,u,f,d,v,g,p,m,y,b,D,S,E,T,k,H,z,R,N,L=n.length,W="",_={},I={},Y=h(),j=x();(z=r("isRTL"))?(R=-1,N=j-1):(R=1,N=0);for(o=0;o<L;o++)s=n[o],c=s.event,l=w(s.start,s.start),u=w(s.start,s.end),f=s.col,d=s.level,v=s.forward||0,g=M(f*R+N),p=C(f*R+N)-g,p=Math.min(p-6,.95*p),m=d?p/(d+v+1):v?2*(p/(v+1)-6):p,y=g+p/(d+v+1)*d*R+(z?p-m:0),s.top=l,s.left=y,s.outerWidth=m,s.outerHeight=u-l,W+=Q(c,s);for(Y[0].innerHTML=W,b=Y.children(),o=0;o<L;o++)s=n[o],c=s.event,D=t(b[o]),!1===(S=a("eventRender",c,c,D))?D.remove():(S&&!0!==S&&(D.remove(),D=t(S).css({position:"absolute",top:s.top,left:s.left}).appendTo(Y)),s.element=D,c._id===i?K(c,D,s):D[0]._fci=o,F(c,D));for(A(Y,n,K),o=0;o<L;o++)s=n[o],(D=s.element)&&(T=_[E=s.key=U(D[0])],s.vsides=T===e?_[E]=B(D,!0):T,T=I[E],s.hsides=T===e?I[E]=O(D,!0):T,(k=D.find("div.fc-event-content")).length&&(s.contentTop=k[0].offsetTop));for(o=0;o<L;o++)s=n[o],(D=s.element)&&(D[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",H=Math.max(0,s.outerHeight-s.vsides),D[0].style.height=H+"px",c=s.event,s.contentTop!==e&&H-s.contentTop<10&&(D.find("div.fc-event-time").text(J(c.start,r("timeFormat"))+" - "+c.title),D.find("div.fc-event-title").remove()),a("eventAfterRender",c,c,D))}(function(e){var r,a,i,o,s,c,l=x(),u=D(),f=y(),d=m(b(n.visStart),u),v=t.map(e,$),h=[];for(r=0;r<l;r++){for(rt(a=L(N(e,v,d,m(b(d),f-u)))),i=0;i<a.length;i++)for(o=a[i],s=0;s<o.length;s++)(c=o[s]).col=r,c.level=i,h.push(c);g(d,1,!0)}return h}(d),o)},n.compileDaySegs=Z,n.clearEvents=function(){l(),v().empty(),h().empty()},n.slotSegHtml=Q,n.bindDaySeg=function(t,e,n){i(t)&&function(t,e,n){var i,o,s,c=!0,l=r("isRTL")?-1:1,u=p(),f=T(),v=k(),h=D();function m(){c||(e.width(i).height("").draggable("option","grid",null),c=!0)}e.draggable({zIndex:9,opacity:r("dragOpacity","month"),revertDuration:r("dragRevertDuration"),start:function(h,p){a("eventDragStart",e,t,h,p),W(t,e),i=e.width(),u.start(function(a,i,u,h){P(),a?(o=!1,s=h*l,a.row?n?c&&(e.width(f-10),_(e,v*Math.round((t.end?(t.end-t.start)/d:r("defaultEventMinutes"))/r("slotMinutes"))),e.draggable("option","grid",[f,1]),c=!1):o=!0:(j(g(b(t.start),s),g(z(t),s)),m()),o=o||c&&!s):(m(),o=!0),e.draggable("option","revert",o)},h,"drag")},stop:function(n,i){if(u.stop(),P(),a("eventDragStop",e,t,n,i),o)m(),e.css("filter",""),R(t,e);else{var l=0;c||(l=Math.round((e.offset().top-H().offset().top)/v)*r("slotMinutes")+h-(60*t.start.getHours()+t.start.getMinutes())),I(this,t,s,l,c,n,i)}}})}(t,e,n.isStart);n.isEnd&&o(t)&&E(t,e,n);u(t,e)},it.call(n);var r=n.opt,a=n.trigger,i=n.isEventDraggable,o=n.isEventResizable,s=n.eventEnd,c=n.reportEvents,l=n.reportEventClear,u=n.eventElementHandlers,f=n.setHeight,v=n.getDaySegmentContainer,h=n.getSlotSegmentContainer,p=n.getHoverListener,y=n.getMaxMinute,D=n.getMinMinute,w=n.timePosition,M=n.colContentLeft,C=n.colContentRight,S=n.renderDaySegs,E=n.resizableDayEvent,x=n.getColCnt,T=n.getColWidth,k=n.getSlotHeight,H=n.getBodyContent,F=n.reportEventElement,R=n.showEvents,W=n.hideEvents,I=n.eventDrop,Y=n.eventResize,j=n.renderDayOverlay,P=n.clearOverlays,q=n.calendar,J=q.formatDate,V=q.formatDates;function Z(e){var r,a,i,o,s=L(N(e,t.map(e,z),n.visStart,n.visEnd)),c=s.length,l=[];for(r=0;r<c;r++)for(a=s[r],i=0;i<a.length;i++)(o=a[i]).row=0,o.level=r,l.push(o);return l}function $(t){return t.end?b(t.end):m(b(t.start),r("defaultEventMinutes"))}function Q(t,e){var n="<",a=t.url,s=G(t,r),c=s?" style='"+s+"'":"",l=["fc-event","fc-event-skin","fc-event-vert"];return i(t)&&l.push("fc-event-draggable"),e.isStart&&l.push("fc-corner-top"),e.isEnd&&l.push("fc-corner-bottom"),l=l.concat(t.className),t.source&&(l=l.concat(t.source.className||[])),n+=a?"a href='"+X(t.url)+"'":"div",n+=" class='"+l.join(" ")+"' style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+s+"'><div class='fc-event-inner fc-event-skin'"+c+"><div class='fc-event-head fc-event-skin'"+c+"><div class='fc-event-time'>"+X(V(t.start,t.end,r("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+X(t.title)+"</div></div><div class='fc-event-bg'></div></div>",e.isEnd&&o(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(a?"a":"div")+">"}function K(t,e,n){var c,l,f,d,v,h,y=e.find("div.fc-event-time");i(t)&&function(t,e,n){var i,o,s,c,l=!1,u=r("isRTL")?-1:1,f=p(),d=x(),v=T(),h=k();function y(e){var a,i=m(b(t.start),e);t.end&&(a=m(b(t.end),e)),n.text(V(i,a,r("timeFormat")))}function D(){l&&(n.css("display",""),e.draggable("option","grid",[v,h]),l=!1)}e.draggable({zIndex:9,scroll:!1,grid:[v,h],axis:1==d&&"y",opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(d,v){a("eventDragStart",e,t,d,v),W(t,e),i=e.position(),s=c=0,f.start(function(a,i,s,c){e.draggable("option","revert",!a),P(),a&&(o=c*u,r("allDaySlot")&&!a.row?(l||(l=!0,n.hide(),e.draggable("option","grid",null)),j(g(b(t.start),o),g(z(t),o))):D())},d,"drag")},drag:function(t,e){(s=Math.round((e.position.top-i.top)/h)*r("slotMinutes"))!=c&&(l||y(s),c=s)},stop:function(n,r){var c=f.stop();P(),a("eventDragStop",e,t,n,r),c&&(o||s||l)?I(this,t,o,l?0:s,l,n,r):(D(),e.css("filter",""),e.css(i),y(0),R(t,e))}})}(t,e,y),n.isEnd&&o(t)&&(c=t,l=e,f=y,h=k(),l.resizable({handles:{s:"div.ui-resizable-s"},grid:h,start:function(t,e){d=v=0,W(c,l),l.css("z-index",9),a("eventResizeStart",this,c,t,e)},resize:function(t,e){(d=Math.round((Math.max(h,l.height())-e.originalSize.height)/h))!=v&&(f.text(V(c.start,d||c.end?m(s(c),r("slotMinutes")*d):null,r("timeFormat"))),v=d)},stop:function(t,e){a("eventResizeStop",this,c,t,e),d?Y(this,c,0,r("slotMinutes")*d,t,e):(l.css("z-index",8),R(c,l))}})),u(t,e)}}.call(i);var o,s,c,l,u,f,v,h,p,w,C,S,E,T,k,H,F,R,I,Y,j,q,J,V,K,tt,et,nt,ft,dt,vt,ht,gt,pt,mt,yt,bt,Dt,wt,Mt,Ct,St=i.opt,Et=i.trigger,xt=i.clearEvents,Tt=i.renderOverlay,kt=i.clearOverlays,Ht=i.reportSelection,zt=i.unselect,Ft=i.daySelectionMousedown,Rt=i.slotSegHtml,Nt=r.formatDate,Lt={};function At(t){t.click(_t).mousedown(Ft)}function Wt(t){t.click(_t).mousedown(Ut)}function _t(t){if(!St("selectable")){var e=Math.min(nt-1,Math.floor((t.pageX-o.offset().left-J)/V)),n=jt(e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*St("slotMinutes"),i=Math.floor(a/60);n.setHours(i),n.setMinutes(a%60+wt),Et("dayClick",u[e],n,!1,t)}else Et("dayClick",u[e],n,!0,t)}}function Ot(t,e,n){n&&dt.build();var r,a,o=b(i.visStart);yt?(r=M(e,o)*bt+Dt+1,a=M(t,o)*bt+Dt+1):(r=M(t,o),a=M(e,o)),(r=Math.max(0,r))<(a=Math.min(nt,a))&&At(Bt(0,r,0,a-1))}function Bt(t,e,n,r){var a=dt.rect(t,e,n,r,p);return Tt(a,p)}function It(t,e){for(var n=b(i.visStart),r=g(b(n),1),a=0;a<nt;a++){var o=new Date(Math.max(n,t)),s=new Date(Math.min(r,e));if(o<s){var c=a*bt+Dt,l=dt.rect(0,c,0,c,T),u=Jt(n,o),f=Jt(n,s);l.top=u,l.height=f-u,Wt(Tt(l,T))}g(n,1),g(r,1)}}function Yt(t){var e=jt(t.col),n=t.row;return St("allDaySlot")&&n--,n>=0&&m(e,wt+n*St("slotMinutes")),e}function jt(t){return g(b(i.visStart),t*bt+Dt)}function Pt(t){return St("allDaySlot")&&!t.row}function qt(t){return(t-Math.max(pt,mt)+nt)%nt*bt+Dt}function Jt(t,n){if(n<m(b(t=b(t,!0)),wt))return 0;if(n>=m(b(t),Mt))return H.height();var r=St("slotMinutes"),a=60*n.getHours()+n.getMinutes()-wt,i=Math.floor(a/r),o=Lt[i];return o===e&&(o=Lt[i]=H.find("tr:eq("+i+") td div")[0].offsetTop),Math.max(0,Math.round(o-1+tt*(a%r/r)))}function Vt(e,n){var r=St("selectHelper");if(dt.build(),r){var a=M(e,i.visStart)*bt+Dt;if(a>=0&&a<nt){var o=dt.rect(0,a,0,a,T),s=Jt(e,e),c=Jt(e,n);if(c>s){if(o.top=s,o.height=c-s,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",o.zIndex=8,Y=t(l).css(o).appendTo(T))}else o.isStart=!0,o.isEnd=!0,(Y=t(Rt({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o))).css("opacity",St("dragOpacity"));Y&&(Wt(Y),T.append(Y),W(Y,o.width,!0),_(Y,o.height,!0))}}}else It(e,n)}function Xt(){kt(),Y&&(Y.remove(),Y=null)}function Ut(e){var n;1==e.which&&St("selectable")&&(zt(e),vt.start(function(t,e){if(Xt(),t&&t.col==e.col&&!Pt(t)){var r=Yt(e),a=Yt(t);Vt((n=[r,m(b(r),St("slotMinutes")),a,m(b(a),St("slotMinutes"))].sort(P))[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){vt.stop(),n&&(+n[0]==+n[1]&&Zt(n[0],!1,t),Ht(n[0],n[3],!1,t))}))}function Zt(t,e,n){Et("dayClick",u[qt(t.getDay())],t,e,n)}Z(n.addClass("fc-agenda")),dt=new ct(function(e,n){var r,a,i;c.each(function(e,o){r=t(o),a=r.offset().left,e&&(i[1]=a),i=[a],n[e]=i}),i[1]=a+r.outerWidth(),St("allDaySlot")&&(a=(r=S).offset().top,e[0]=[a,a+r.outerHeight()]);var o=T.offset().top,s=E.offset().top,l=s+E.outerHeight();function u(t){return Math.max(s,Math.min(l,t))}for(var f=0;f<ft;f++)e.push([u(o+tt*f),u(o+tt*(f+1))])}),vt=new lt(dt),ht=new ut(function(t){return f.eq(t)})}function rt(t){var e,n,r,a,i,o;for(e=t.length-1;e>0;e--)for(a=t[e],n=0;n<a.length;n++)for(i=a[n],r=0;r<t[e-1].length;r++)R(i,o=t[e-1][r])&&(o.forward=Math.max(o.forward||0,(i.forward||0)+1))}function at(t,n,r){var a=this;a.element=t,a.calendar=n,a.name=r,a.opt=d,a.trigger=v,a.isEventDraggable=function(t){return h(t)&&!d("disableDragging")},a.isEventResizable=function(t){return h(t)&&!d("disableResizing")},a.reportEvents=function(t){c={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],c[n._id]?c[n._id].push(n):c[n._id]=[n]},a.eventEnd=p,a.reportEventElement=function(t,e){l.push(e),u[t._id]?u[t._id].push(e):u[t._id]=[e]},a.reportEventClear=function(){l=[],u={}},a.eventElementHandlers=function(t,e){e.click(function(n){if(!e.hasClass("ui-draggable-dragging")&&!e.hasClass("ui-resizable-resizing"))return v("eventClick",this,t,n)}).hover(function(e){v("eventMouseover",this,t,e)},function(e){v("eventMouseout",this,t,e)})},a.showEvents=function(t,e){y(t,e,"show")},a.hideEvents=function(t,e){y(t,e,"hide")},a.eventDrop=function(t,e,n,r,a,i,o){var l=e.allDay,u=e._id;D(c[u],n,r,a),v("eventDrop",t,e,n,r,a,function(){D(c[u],-n,-r,l),s(u)},i,o),s(u)},a.eventResize=function(t,e,n,r,a,i){var o=e._id;w(c[o],n,r),v("eventResize",t,e,n,r,function(){w(c[o],-n,-r),s(o)},a,i),s(o)};var i=a.defaultEventEnd,o=n.normalizeEvent,s=n.reportEventChange,c={},l=[],u={},f=n.options;function d(t,e){var n=f[t];return"object"==typeof n?V(n,e||r):n}function v(t,e){return n.trigger.apply(n,[t,e||a].concat(Array.prototype.slice.call(arguments,2),[a]))}function h(t){return tt(t.editable,(t.source||{}).editable,d("editable"))}function p(t){return t.end?b(t.end):i(t)}function y(t,e,n){var r,a=u[t._id],i=a.length;for(r=0;r<i;r++)e&&a[r][0]==e[0]||a[r][n]()}function D(t,n,r,a){r=r||0;for(var i,s=t.length,c=0;c<s;c++)i=t[c],a!==e&&(i.allDay=a),m(g(i.start,n,!0),r),i.end&&(i.end=m(g(i.end,n,!0),r)),o(i,f)}function w(t,e,n){n=n||0;for(var r,a=t.length,i=0;i<a;i++)(r=t[i]).end=m(g(p(r),e,!0),n),o(r,f)}}function it(){var n=this;n.renderDaySegs=function(t,e){var n,r,a,i,o,s,l,u=C(),f=d(),h=v(),g=0,p=t.length;for(u[0].innerHTML=H(t),z(t,u.children()),function(t){var e,n,r,a=t.length;for(e=0;e<a;e++)n=t[e],(r=n.element)&&c(n.event,r)}(t),function(t,e,n){var r,a,i,o,s=t.length;for(r=0;r<s;r++)a=t[r],(i=a.element)&&((o=a.event)._id===n?S(o,i,a):i[0]._fci=r);A(e,t,S)}(t,u,e),F(t),R(t),N(t),n=L(),r=0;r<f;r++){for(0,a=[],i=0;i<h;i++)a[i]=0;for(;g<p&&(o=t[g]).row==r;){for(s=q(a.slice(o.startCol,o.endCol)),o.top=s,s+=o.outerHeight,l=o.startCol;l<o.endCol;l++)a[l]=s;g++}n[r].height(q(a))}_(t,W(n))},n.resizableDayEvent=function(e,i,o){var c=r("isRTL"),h=c?"w":"e",p=i.find("div.ui-resizable-"+h),m=!1;Z(i),i.mousedown(function(t){t.preventDefault()}).click(function(t){m&&(t.preventDefault(),t.stopImmediatePropagation())}),p.mousedown(function(r){if(1==r.which){m=!0;var p,y,D=n.getHoverListener(),S=d(),E=v(),A=c?-1:1,O=c?E-1:0,B=i.css("top"),I=t.extend({},e),Y=w(e.start);k(),t("body").css("cursor",h+"-resize").one("mouseup",function(n){a("eventResizeStop",this,e,n),t("body").css("cursor",""),D.stop(),T(),p&&f(this,e,p,0,n);setTimeout(function(){m=!1},0)}),a("eventResizeStart",this,e,r),D.start(function(n,r){if(n){var a=Math.max(Y.row,n.row),i=n.col;1==S&&(a=0),a==Y.row&&(i=c?Math.min(Y.col,i):Math.max(Y.col,i)),p=7*a+i*A+O-(7*r.row+r.col*A+O);var f=g(s(e),p,!0);if(p){I.end=f;var d=y;(y=function(e,n,r){var a,i,o,s=t("<div/>"),c=C(),l=e.length;for(s[0].innerHTML=H(e),a=s.children(),c.append(a),z(e,a),F(e),R(e),N(e),_(e,W(L())),a=[],i=0;i<l;i++)(o=e[i].element)&&(e[i].row===n&&o.css("top",r),a.push(o[0]));return t(a)}(M([I]),o.row,B)).find("*").css("cursor",h+"-resize"),d&&d.remove(),u(e)}else y&&(l(e),y.remove(),y=null);T(),x(e.start,g(b(f),1))}},r)}})};var r=n.opt,a=n.trigger,i=n.isEventDraggable,o=n.isEventResizable,s=n.eventEnd,c=n.reportEventElement,l=n.showEvents,u=n.hideEvents,f=n.eventResize,d=n.getRowCnt,v=n.getColCnt,h=(n.getColWidth,n.allDayRow),p=n.allDayBounds,m=n.colContentLeft,y=n.colContentRight,D=n.dayOfWeekCol,w=n.dateCell,M=n.compileDaySegs,C=n.getDaySegmentContainer,S=n.bindDaySeg,E=n.calendar.formatDates,x=n.renderDayOverlay,T=n.clearOverlays,k=n.clearSelection;function H(t){var e,n,a,s,c,l,u,f,d,v,h=r("isRTL"),g=t.length,b=p(),w=b.left,M=b.right,C="";for(e=0;e<g;e++)a=(n=t[e]).event,c=["fc-event","fc-event-skin","fc-event-hori"],i(a)&&c.push("fc-event-draggable"),h?(n.isStart&&c.push("fc-corner-right"),n.isEnd&&c.push("fc-corner-left"),l=D(n.end.getDay()-1),u=D(n.start.getDay()),f=n.isEnd?m(l):w,d=n.isStart?y(u):M):(n.isStart&&c.push("fc-corner-left"),n.isEnd&&c.push("fc-corner-right"),l=D(n.start.getDay()),u=D(n.end.getDay()-1),f=n.isStart?m(l):w,d=n.isEnd?y(u):M),c=c.concat(a.className),a.source&&(c=c.concat(a.source.className||[])),s=a.url,v=G(a,r),C+=s?"<a href='"+X(s)+"'":"<div",C+=" class='"+c.join(" ")+"' style='position:absolute;z-index:8;left:"+f+"px;"+v+"'><div class='fc-event-inner fc-event-skin'"+(v?" style='"+v+"'":"")+">",!a.allDay&&n.isStart&&(C+="<span class='fc-event-time'>"+X(E(a.start,a.end,r("timeFormat")))+"</span>"),C+="<span class='fc-event-title'>"+X(a.title)+"</span></div>",n.isEnd&&o(a)&&(C+="<div class='ui-resizable-handle ui-resizable-"+(h?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),C+="</"+(s?"a":"div")+">",n.left=f,n.outerWidth=d-f,n.startCol=l,n.endCol=u+1;return C}function z(e,n){var r,i,o,s,c,l=e.length;for(r=0;r<l;r++)o=(i=e[r]).event,s=t(n[r]),!1===(c=a("eventRender",o,o,s))?s.remove():(c&&!0!==c&&(c=t(c).css({position:"absolute",left:i.left}),s.replaceWith(c),s=c),i.element=s)}function F(t){var n,r,a,i,o,s=t.length,c={};for(n=0;n<s;n++)(a=(r=t[n]).element)&&((o=c[i=r.key=U(a[0])])===e&&(o=c[i]=O(a,!0)),r.hsides=o)}function R(t){var e,n,r,a=t.length;for(e=0;e<a;e++)(r=(n=t[e]).element)&&(r[0].style.width=Math.max(0,n.outerWidth-n.hsides)+"px")}function N(t){var n,r,a,i,o,s=t.length,c={};for(n=0;n<s;n++)(a=(r=t[n]).element)&&((o=c[i=r.key])===e&&(o=c[i]=I(a)),r.outerHeight=a[0].offsetHeight+o)}function L(){var t,e=d(),n=[];for(t=0;t<e;t++)n[t]=h(t).find("td:first div.fc-day-content > div");return n}function W(t){var e,n=t.length,r=[];for(e=0;e<n;e++)r[e]=t[e][0].offsetTop;return r}function _(t,e){var n,r,i,o,s=t.length;for(n=0;n<s;n++)(i=(r=t[n]).element)&&(i[0].style.top=e[r.row]+(r.top||0)+"px",o=r.event,a("eventAfterRender",o,o,i))}}function ot(){var e=this;e.select=function(t,e,n){c(),e||(e=a(t,n));i(t,e,n),l(t,e,n)},e.unselect=c,e.reportSelection=l,e.daySelectionMousedown=function(r){var a=e.cellDate,s=e.cellIsAllDay,u=e.getHoverListener(),f=e.reportDayClick;if(1==r.which&&n("selectable")){c(r);var d;u.start(function(t,e){o(),t&&s(t)?(d=[a(e),a(t)].sort(P),i(d[0],d[1],!0)):d=null},r),t(document).one("mouseup",function(t){u.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),l(d[0],d[1],!0,t))})}};var n=e.opt,r=e.trigger,a=e.defaultSelectionEnd,i=e.renderSelection,o=e.clearSelection,s=!1;function c(t){s&&(s=!1,o(),r("unselect",null,t))}function l(t,e,n,a){s=!0,r("select",null,t,e,n,a)}n("selectable")&&n("unselectAuto")&&t(document).mousedown(function(e){var r=n("unselectCancel");r&&t(e.target).parents(r).length||c(e)})}function st(){this.renderOverlay=function(r,a){var i=n.shift();i||(i=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));i[0].parentNode!=a[0]&&i.appendTo(a);return e.push(i.css(r).show()),i},this.clearOverlays=function(){var t;for(;t=e.shift();)n.push(t.hide().unbind())};var e=[],n=[]}function ct(t){var e,n;this.build=function(){t(e=[],n=[])},this.cell=function(t,r){var a,i=e.length,o=n.length,s=-1,c=-1;for(a=0;a<i;a++)if(r>=e[a][0]&&r<e[a][1]){s=a;break}for(a=0;a<o;a++)if(t>=n[a][0]&&t<n[a][1]){c=a;break}return s>=0&&c>=0?{row:s,col:c}:null},this.rect=function(t,r,a,i,o){var s=o.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[i][1]-n[r][0],height:e[a][1]-e[t][0]}}}function lt(n){var r,a,i,o;function s(t){var r;(r=t).pageX===e&&(r.pageX=r.originalEvent.pageX,r.pageY=r.originalEvent.pageY);var s=n.cell(t.pageX,t.pageY);(!s!=!o||s&&(s.row!=o.row||s.col!=o.col))&&(s?(i||(i=s),a(s,i,s.row-i.row,s.col-i.col)):a(s,i),o=s)}this.start=function(e,c,l){a=e,i=o=null,n.build(),s(c),r=l||"mousemove",t(document).bind(r,s)},this.stop=function(){return t(document).unbind(r,s),o}}function ut(t){var n=this,r={},a={},i={};function o(e){return r[e]=r[e]||t(e)}n.left=function(t){return a[t]=a[t]===e?o(t).position().left:a[t]},n.right=function(t){return i[t]=i[t]===e?n.left(t)+o(t).width():i[t]},n.clear=function(){r={},a={},i={}}}a.applyAll=K,i.month=function(t,e){var n=this;n.render=function(t,e){e&&(h(t,e),t.setDate(1));var o=b(t,!0);o.setDate(1);var s=h(b(o),1),c=b(o),l=b(s),f=r("firstDay"),d=r("weekends")?0:1;d&&(w(c),w(l,-1,!0));g(c,-(c.getDay()-Math.max(f,d)+7)%7),g(l,(7-l.getDay()+Math.max(f,d))%7);var v=Math.round((l-c)/(7*u));"fixed"==r("weekMode")&&(g(l,7*(6-v)),v=6);n.title=i(o,r("titleFormat")),n.start=o,n.end=s,n.visStart=c,n.visEnd=l,a(6,v,d?5:7,!0)},et.call(n,t,e,"month");var r=n.opt,a=n.renderBasic,i=e.formatDate},i.basicWeek=function(t,e){var n=this;n.render=function(t,e){e&&g(t,7*e);var o=g(b(t),-(t.getDay()-r("firstDay")+7)%7),s=g(b(o),7),c=b(o),l=b(s),u=r("weekends");u||(w(c),w(l,-1,!0));n.title=i(c,g(b(l),-1),r("titleFormat")),n.start=o,n.end=s,n.visStart=c,n.visEnd=l,a(1,1,u?7:5,!1)},et.call(n,t,e,"basicWeek");var r=n.opt,a=n.renderBasic,i=e.formatDates},i.basicDay=function(t,e){var n=this;n.render=function(t,e){e&&(g(t,e),r("weekends")||w(t,e<0?-1:1));n.title=i(t,r("titleFormat")),n.start=n.visStart=b(t,!0),n.end=n.visEnd=g(b(n.start),1),a(1,1,1,!1)},et.call(n,t,e,"basicDay");var r=n.opt,a=n.renderBasic,i=e.formatDate},o({weekMode:"fixed"}),i.agendaWeek=function(t,e){var n=this;n.render=function(t,e){e&&g(t,7*e);var o=g(b(t),-(t.getDay()-r("firstDay")+7)%7),s=g(b(o),7),c=b(o),l=b(s),u=r("weekends");u||(w(c),w(l,-1,!0));n.title=i(c,g(b(l),-1),r("titleFormat")),n.start=o,n.end=s,n.visStart=c,n.visEnd=l,a(u?7:5)},nt.call(n,t,e,"agendaWeek");var r=n.opt,a=n.renderAgenda,i=e.formatDates},i.agendaDay=function(t,e){var n=this;n.render=function(t,e){e&&(g(t,e),r("weekends")||w(t,e<0?-1:1));var o=b(t,!0),s=g(b(o),1);n.title=i(t,r("titleFormat")),n.start=n.visStart=o,n.end=n.visEnd=s,a(1)},nt.call(n,t,e,"agendaDay");var r=n.opt,a=n.renderAgenda,i=e.formatDate},o({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);