/**
 * FullCalendar v1.5.4
 * http://arshaw.com/fullcalendar/
 *
 * Use fullcalendar.css for basic styling.
 * For event drag & drop, requires jQuery UI draggable.
 * For event resizing, requires jQuery UI resizable.
 *
 * Copyright (c) 2011 Adam Shaw
 * Dual licensed under the MIT and GPL licenses, located in
 * MIT-LICENSE.txt and GPL-LICENSE.txt respectively.
 *
 * Date: Tue Sep 4 23:38:33 2012 -0700
 *
 */
!function(t,e){var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},r={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},a=t.fullCalendar={version:"1.5.4"},o=a.views={};function i(e){t.extend(!0,n,e)}function s(n,r,i){var s=this;s.options=r,s.render=function(e){v?(J(),j(),$(),B(e)):function(){r.theme?"ui":"fc",n.addClass("fc"),r.isRTL&&n.addClass("fc-rtl");r.theme&&n.addClass("ui-widget");v=t("<div class='fc-content' style='position:relative'/>").prependTo(n),f=new c(s,r),(d=f.render())&&n.prepend(d);O(r.defaultView),t(window).resize(X),_()||A()}()},s.destroy=function(){t(window).unbind("resize",X),f.destroy(),v.remove(),n.removeClass("fc fc-rtl ui-widget")},s.refetchEvents=U,s.reportEvents=function(t){L=t,Z()},s.reportEventChange=function(t){Z(t)},s.rerenderEvents=Z,s.changeView=O,s.select=function(t,n,r){h.select(t,n,r===e||r)},s.unselect=Q,s.prev=function(){B(-1)},s.next=function(){B(1)},s.prevYear=function(){g(N,-1),B()},s.nextYear=function(){g(N,1),B()},s.today=function(){N=new Date,B()},s.gotoDate=function(t,e,n){t instanceof Date?N=w(t):E(N,t,e,n);B()},s.incrementDate=function(t,n,r){t!==e&&g(N,t);n!==e&&p(N,n);r!==e&&m(N,r);B()},s.formatDate=function(t,e){return H(t,e,r)},s.formatDates=function(t,e,n){return z(t,e,n,r)},s.getDate=function(){return w(N)},s.getView=function(){return h},s.option=function(t,n){if(n===e)return r[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(r[t]=n,I())},s.trigger=function(t,e){if(r[t])return r[t].apply(e||T,Array.prototype.slice.call(arguments,2))},function(n,r){var o=this;o.isFetchNeeded=function(t,e){return!i||t<i||e>s},o.fetchEvents=function(t,e){i=t,s=e,y=[];var n=++g,r=h.length;p=r;for(var a=0;a<r;a++)D(h[a],n)},o.addEventSource=function(t){(t=M(t))&&(p++,D(t,g))},o.removeEventSource=function(e){h=t.grep(h,function(t){return!T(t,e)}),y=t.grep(y,function(t){return!T(t.source,e)}),d(y)},o.updateEvent=function(t){var e,n,r=y.length,a=f().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=y[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroudColor=t.backgroudColor,n.borderColor=t.borderColor,n.textColor=t.textColor,E(n));E(t),d(y)},o.renderEvent=function(t,e){E(t),t.source||(e&&(v.events.push(t),t.source=v),y.push(t));d(y)},o.removeEvents=function(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}y=t.grep(y,e,!0);for(var r=0;r<h.length;r++)t.isArray(h[r].events)&&(h[r].events=t.grep(h[r].events,e,!0))}else{y=[];for(var r=0;r<h.length;r++)t.isArray(h[r].events)&&(h[r].events=[])}d(y)},o.clientEvents=function(e){if(t.isFunction(e))return t.grep(y,e);if(e)return e+="",t.grep(y,function(t){return t._id==e});return y},o.normalizeEvent=E;for(var i,s,c=o.trigger,f=o.getView,d=o.reportEvents,v={events:[]},h=[v],g=0,p=0,m=0,y=[],b=0;b<r.length;b++)M(r[b]);function D(e,r){!function e(r,o){var c;var u=a.sourceFetchers;var f;for(c=0;c<u.length;c++){if(!0===(f=u[c](r,i,s,o)))return;if("object"==typeof f)return void e(f,o)}var d=r.events;if(d)t.isFunction(d)?(C(),d(w(i),w(s),function(t){o(t),S()})):t.isArray(d)?o(d):o();else{var v=r.url;if(v){var h=r.success,g=r.error,p=r.complete,m=t.extend({},r.data||{}),y=nt(r.startParam,n.startParam),b=nt(r.endParam,n.endParam);y&&(m[y]=Math.round(+i/1e3)),b&&(m[b]=Math.round(+s/1e3)),C(),t.ajax(t.extend({},l,r,{data:m,success:function(e){e=e||[];var n=et(h,this,arguments);t.isArray(n)&&(e=n),o(e)},error:function(){et(g,this,arguments),o()},complete:function(){et(p,this,arguments),S()}}))}else o()}}(e,function(t){if(r==g){if(t){for(var n=0;n<t.length;n++)t[n].source=e,E(t[n]);y=y.concat(t)}--p||d(y)}})}function M(e){if(t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e)return function(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=a.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}(e),h.push(e),e}function C(){m++||c("loading",null,!0)}function S(){--m||c("loading",null,!1)}function E(t){var r=t.source||{},a=nt(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+u++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=w(t.start=x(t.start,a)),t.end=x(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?w(t.end):null,t.allDay===e&&(t.allDay=nt(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function T(t,e){return t&&e&&k(t)==k(e)}function k(t){return("object"==typeof t?t.events||t.url:"")||t}}.call(s,r,i);var f,d,v,h,y,b,D,M,C=s.isFetchNeeded,S=s.fetchEvents,T=n[0],k={},F=0,R=0,N=new Date,L=[];function A(){setTimeout(function(){!h.start&&_()&&B()},0)}function W(){return 0!==T.offsetWidth}function _(){return 0!==t("body")[0].offsetWidth}function O(e){if(!h||e!=h.name){R++,Q();var n,r=h;r?((r.beforeHide||q)(),P(v,v.height()),r.element.hide()):P(v,1),v.css("overflow","hidden"),(h=k[e])?h.element.show():h=k[e]=new o[e](n=D=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(v),s),r&&f.deactivateButton(r.name),f.activateButton(e),B(),v.css("overflow",""),r&&P(v,1),n||(h.afterShow||q)(),R--}}function B(t){if(W()){R++,Q(),b===e&&J();var a=!1;!h.start||t||N<h.start||N>=h.end?(h.render(N,t||0),V(!0),a=!0):h.sizeDirty?(h.clearEvents(),V(),a=!0):h.eventsDirty&&(h.clearEvents(),a=!0),h.sizeDirty=!1,h.eventsDirty=!1,i=a,!r.lazyFetching||C(h.visStart,h.visEnd)?U():i&&Z(),y=n.outerWidth(),f.updateTitle(h.title);var o=new Date;o>=h.start&&o<h.end?f.disableButton("today"):f.enableButton("today"),R--,h.trigger("viewDisplay",T)}var i}function I(){j(),W()&&(J(),V(),Q(),h.clearEvents(),h.renderEvents(L),h.sizeDirty=!1)}function j(){t.each(k,function(t,e){e.sizeDirty=!0})}function J(){b=r.contentHeight?r.contentHeight:r.height?r.height-(d?d.height():0)-Y(v):Math.round(v.width()/Math.max(r.aspectRatio,.5))}function V(t){R++,h.setHeight(b,t),D&&(D.css("position","relative"),D=null),h.setWidth(v.width(),t),R--}function X(){if(!R)if(h.start){var t=++F;setTimeout(function(){t==F&&!R&&W()&&y!=(y=n.outerWidth())&&(R++,I(),h.trigger("windowResize",T),R--)},200)}else A()}function U(){S(h.visStart,h.visEnd)}function Z(t){$(),W()&&(h.clearEvents(),h.renderEvents(L,t),h.eventsDirty=!1)}function $(){t.each(k,function(t,e){e.eventsDirty=!0})}function Q(){h&&h.unselect()}E(N,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(M=a,h.dragStart(M,e,n))}}).bind("dragstop",function(t,e){M&&(h.dragStop(M,t,e),M=null)})}function c(e,n){var r=this;r.render=function(){if(a=n.theme?"ui":"fc",n.header)return i=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(s("left")).append(s("center")).append(s("right")))},r.destroy=function(){i.remove()},r.updateTitle=function(t){i.find("h2").html(t)},r.activateButton=function(t){i.find("span.fc-button-"+t).addClass(a+"-state-active")},r.deactivateButton=function(t){i.find("span.fc-button-"+t).removeClass(a+"-state-active")},r.disableButton=function(t){i.find("span.fc-button-"+t).addClass(a+"-state-disabled")},r.enableButton=function(t){i.find("span.fc-button-"+t).removeClass(a+"-state-disabled")};var a,i=t([]);function s(r){var i=t("<td class='fc-header-"+r+"'/>"),s=n.header[r];return s&&t.each(s.split(" "),function(r){var s;r>0&&i.append("<span class='fc-header-space'/>"),t.each(this.split(","),function(r,c){var l;if("title"==c)i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(a+"-corner-right"),s=null;else if(e[c]?l=e[c]:o[c]&&(l=function(){d.removeClass(a+"-state-hover"),e.changeView(c)}),l){var u=n.theme?U(n.buttonIcons,c):null,f=U(n.buttonText,c),d=t("<a class='fc-button fc-button-"+c+" "+a+"-state-default' href='#'><span class='fc-button-inner'><span class='fc-button-content'>"+(u?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+u+"'/></span>":f)+"</span><span class='fc-button-effect'><span></span></span></span></a>");d&&(d.click(function(){d.hasClass(a+"-state-disabled")||l()}).mousedown(function(){d.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-down")}).mouseup(function(){d.removeClass(a+"-state-down")}).hover(function(){d.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-hover")},function(){d.removeClass(a+"-state-hover").removeClass(a+"-state-down")}).appendTo(i),s||d.addClass(a+"-corner-left"),s=d)}}),s&&s.addClass(a+"-corner-right")}),i}}t.fn.fullCalendar=function(a){if("string"==typeof a){var o,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t.data(this,"fullCalendar");if(n&&t.isFunction(n[a])){var r=n[a].apply(n,i);o===e&&(o=r),"destroy"==a&&t.removeData(this,"fullCalendar")}}),o!==e?o:this}var c=a.eventSources||[];return delete a.eventSources,a.events&&(c.push(a.events),delete a.events),a=t.extend(!0,{},n,a.isRTL||a.isRTL===e&&n.isRTL?r:{},a),this.each(function(e,n){var r=t(n),o=new s(r,a,c);r.data("fullCalendar",o),o.render()}),this},a.sourceNormalizers=[],a.sourceFetchers=[];var l={dataType:"json",cache:!1},u=1;a.addDays=m,a.cloneDate=w,a.parseDate=x,a.parseISO8601=T,a.parseTime=k,a.formatDate=H,a.formatDates=z;var f=["sun","mon","tue","wed","thu","fri","sat"],d=864e5,v=36e5,h=6e4;function g(t,e,n){return t.setFullYear(t.getFullYear()+e),n||D(t),t}function p(t,e,n){if(+t){var r=t.getMonth()+e,a=w(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||D(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function m(t,e,n){if(+t){var r=t.getDate()+e,a=w(t);a.setHours(9),a.setDate(r),t.setDate(r),n||D(t),y(t,a)}return t}function y(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*v)}function b(t,e){return t.setMinutes(t.getMinutes()+e),t}function D(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function w(t,e){return e?D(new Date(+t)):new Date(+t)}function M(){var t,e=0;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function C(t,e,n){for(e=e||1;!t.getDay()||n&&1==t.getDay()||!n&&6==t.getDay();)m(t,e);return t}function S(t,e){return Math.round((w(t,!0)-w(e,!0))/d)}function E(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function x(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),T(t,n)||(t?new Date(t):null)):null}function T(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),y(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),y(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+60*o*1e3)}return r}function k(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function H(t,e,n){return z(t,null,e,n)}function z(t,e,r,a){a=a||n;var o,i,s,c,l=t,u=e,f=r.length,d="";for(o=0;o<f;o++)if("'"==(i=r.charAt(o))){for(s=o+1;s<f;s++)if("'"==r.charAt(s)){l&&(d+=s==o+1?"'":r.substring(o+1,s),o=s);break}}else if("("==i){for(s=o+1;s<f;s++)if(")"==r.charAt(s)){var v=H(l,r.substring(o+1,s),a);parseInt(v.replace(/\D/,""),10)&&(d+=v),o=s;break}}else if("["==i){for(s=o+1;s<f;s++)if("]"==r.charAt(s)){var h=r.substring(o+1,s);(v=H(l,h,a))!=H(u,h,a)&&(d+=v),o=s;break}}else if("{"==i)l=e,u=t;else if("}"==i)l=t,u=e;else{for(s=f;s>o;s--)if(c=F[r.substring(o,s)]){l&&(d+=c(l,a)),o=s-1;break}s==o&&l&&(d+=i)}return d}var F={s:function(t){return t.getSeconds()},ss:function(t){return X(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return X(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return X(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return X(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return X(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return X(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return H(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"}};function R(t){return t.end?(e=t.end,n=t.allDay,e=w(e),n||e.getHours()||e.getMinutes()?m(e,1):D(e)):m(w(t.start),1);var e,n}function N(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function L(t,e){return t.end>e.start&&t.start<e.end}function A(t,e,n,r){var a,o,i,s,c,l,u,f,d=[],v=t.length;for(a=0;a<v;a++)i=(o=t[a]).start,(s=e[a])>n&&i<r&&(i<n?(c=w(n),u=!1):(c=i,u=!0),s>r?(l=w(r),f=!1):(l=s,f=!0),d.push({event:o,start:c,end:l,isStart:u,isEnd:f,msLength:l-c}));return d.sort(N)}function W(t){var e,n,r,a,o,i=[],s=t.length;for(e=0;e<s;e++){for(n=t[e],r=0;;){if(a=!1,i[r])for(o=0;o<i[r].length;o++)if(L(i[r][o],n)){a=!0;break}if(!a)break;r++}i[r]?i[r].push(n):i[r]=[n]}return i}function _(n,r,a){n.unbind("mouseover focusin").on("mouseover focusin",function(n){for(var o,i,s,c=n.target;c!=this;)o=c,c=c.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function O(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).width(Math.max(0,n-I(a,r)))}function B(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).height(Math.max(0,n-Y(a,r)))}function I(e,n){return function(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}(e)+function(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}(e)+(n?function(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}(e):0)}function Y(e,n){return function(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}(e)+function(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}(e)+(n?j(e):0)}function j(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function P(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,n){n.style.cssText+=";min-height:"+e+";_height:"+e})}function q(){}function J(t,e){return t-e}function V(t){return Math.max.apply(Math,t)}function X(t){return(t<10?"0":"")+t}function U(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if((r=t[a[o].toLowerCase()])!==e)return r;return t[""]}function Z(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function $(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function Q(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function G(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function K(t,e){t.each(function(t,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+f[e.getDay()])})}function tt(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,c=t.textColor||n.textColor||e("eventTextColor"),l=[];return i&&l.push("background-color:"+i),s&&l.push("border-color:"+s),c&&l.push("color:"+c),l.join(";")}function et(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;a<e.length;a++)o=e[a].apply(n,r)||o;return o}}function nt(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function rt(e,n,r){var a=this;a.renderBasic=function(n,r,v,h){g=r,p=v,function(){(C=F("isRTL"))?(E=-1,x=p-1):(E=1,x=0);T=F("firstDay"),k=F("weekends")?0:1,H=F("theme")?"ui":"fc",z=F("columnFormat")}();var m=!s;m?function(n,r){var a,v,h,g,m=H+"-widget-header",y=H+"-widget-content";for(a="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",v=0;v<p;v++)a+="<th class='fc- "+m+"'/>";for(a+="</tr></thead><tbody>",v=0;v<n;v++){for(a+="<tr class='fc-week"+v+"'>",h=0;h<p;h++)a+="<td class='fc- "+y+" fc-day"+(v*p+h)+"'><div>"+(r?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";a+="</tr>"}g=t(a+="</tbody></table>").appendTo(e),o=g.find("thead"),i=o.find("th"),s=g.find("tbody"),c=s.find("tr"),l=s.find("td"),u=l.filter(":first-child"),f=c.eq(0).find("div.fc-day-content div"),G(o.add(o.find("tr"))),G(c),c.eq(0).addClass("fc-first"),q(l),d=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}(n,h):L();!function(e){var n,r,o,s=e||1==g,u=a.start.getMonth(),f=D(new Date);s&&i.each(function(e,a){n=t(a),r=tt(e),n.html(j(r,z)),K(n,r)});l.each(function(e,a){n=t(a),(r=tt(e)).getMonth()==u?n.removeClass("fc-other-month"):n.addClass("fc-other-month"),+r==+f?n.addClass(H+"-state-highlight fc-today"):n.removeClass(H+"-state-highlight fc-today"),n.find("div.fc-day-number").text(r.getDate()),s&&K(n,r)}),c.each(function(e,n){o=t(n),e<g?(o.show(),e==g-1?o.addClass("fc-last"):o.removeClass("fc-last")):o.hide()})}(m)},a.setHeight=function(e){var n,r,a,i=e-o.height();"variable"==F("weekMode")?n=r=Math.floor(i/(1==g?2:6)):(n=Math.floor(i/g),r=i-n*(g-1));u.each(function(e,o){e<g&&P((a=t(o)).find("> div"),(e==g-1?r:n)-Y(a))})},a.setWidth=function(t){v=t,M.clear(),h=Math.floor(v/p),O(i.slice(0,-1),h)},a.renderDayOverlay=V,a.defaultSelectionEnd=function(t,e){return w(t)},a.renderSelection=function(t,e,n){V(t,m(w(e),1),!0)},a.clearSelection=function(){B()},a.reportDayClick=function(t,e,n){var r=U(t),a=l[r.row*p+r.col];N("dayClick",a,t,e,n)},a.dragStart=function(t,e,n){b.start(function(t){B(),t&&X(t.row,t.col,t.row,t.col)},e)},a.dragStop=function(t,e,n){var r=b.stop();if(B(),r){var a=Z(r);N("drop",t,a,!0,e,n)}},a.defaultEventEnd=function(t){return w(t.start)},a.getHoverListener=function(){return b},a.colContentLeft=function(t){return M.left(t)},a.colContentRight=function(t){return M.right(t)},a.dayOfWeekCol=et,a.dateCell=U,a.cellDate=Z,a.cellIsAllDay=function(){return!0},a.allDayRow=function(t){return c.eq(t)},a.allDayBounds=function(t){return{left:0,right:v}},a.getRowCnt=function(){return g},a.getColCnt=function(){return p},a.getColWidth=function(){return h},a.getDaySegmentContainer=function(){return d},it.call(a,e,n,r),lt.call(a),ct.call(a),function(){var e=this;e.renderEvents=function(t,e){i(t),b(M(t),e)},e.compileDaySegs=M,e.clearEvents=function(){s(),d().empty()},e.bindDaySeg=function(t,e,i){a(t)&&function(t,e){var a,o=v();e.draggable({zIndex:9,delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(i,s){r("eventDragStart",e,t,i,s),u(t,e),o.start(function(r,o,i,s){e.draggable("option","revert",!r||!i&&!s),g(),r?(a=7*i+s*(n("isRTL")?-1:1),h(m(w(t.start),a),m(R(t),a))):a=0},i,"drag")},stop:function(n,i){o.stop(),g(),r("eventDragStop",e,t,n,i),a?f(this,t,a,0,t.allDay,n,i):(e.css("filter",""),l(t,e))}})}(t,e);i.isEnd&&o(t)&&D(t,e,i);c(t,e)},st.call(e);var n=e.opt,r=e.trigger,a=e.isEventDraggable,o=e.isEventResizable,i=e.reportEvents,s=e.reportEventClear,c=e.eventElementHandlers,l=e.showEvents,u=e.hideEvents,f=e.eventDrop,d=e.getDaySegmentContainer,v=e.getHoverListener,h=e.renderDayOverlay,g=e.clearOverlays,p=e.getRowCnt,y=e.getColCnt,b=e.renderDaySegs,D=e.resizableDayEvent;function M(n){var r,a,o,i,s,c,l=p(),u=y(),f=w(e.visStart),d=m(w(f),u),v=t.map(n,R),h=[];for(r=0;r<l;r++){for(a=W(A(n,v,f,d)),o=0;o<a.length;o++)for(i=a[o],s=0;s<i.length;s++)(c=i[s]).row=r,c.level=o,h.push(c);m(f,7),m(d,7)}return h}}.call(a);var o,i,s,c,l,u,f,d,v,h,g,p,y,b,M,C,E,x,T,k,H,z,F=a.opt,N=a.trigger,L=a.clearEvents,_=a.renderOverlay,B=a.clearOverlays,I=a.daySelectionMousedown,j=n.formatDate;function q(t){t.click(J).mousedown(I)}function J(t){if(!F("selectable")){var e=tt(parseInt(this.className.match(/fc\-day(\d+)/)[1]));N("dayClick",this,e,!0,t)}}function V(t,e,n){n&&y.build();for(var r=w(a.visStart),o=m(w(r),p),i=0;i<g;i++){var s,c,l=new Date(Math.max(r,t)),u=new Date(Math.min(o,e));if(l<u)C?(s=S(u,r)*E+x+1,c=S(l,r)*E+x+1):(s=S(l,r),c=S(u,r)),q(X(i,s,i,c-1));m(r,7),m(o,7)}}function X(t,n,r,a){var o=y.rect(t,n,r,a,e);return _(o,e)}function U(t){return{row:Math.floor(S(t,a.visStart)/7),col:et(t.getDay())}}function Z(t){return $(t.row,t.col)}function $(t,e){return m(w(a.visStart),7*t+e*E+x)}function tt(t){return $(Math.floor(t/p),t%p)}function et(t){return(t-Math.max(T,k)+p)%p*E+x}Q(e.addClass("fc-grid")),y=new ut(function(e,n){var r,a,o;i.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),c.each(function(n,i){n<g&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),b=new ft(y),M=new dt(function(t){return f.eq(t)})}function at(n,r,a){var o=this;o.renderAgenda=function(e){nt=e,gt=St("theme")?"ui":"fc",mt=St("weekends")?0:1,pt=St("firstDay"),(yt=St("isRTL"))?(bt=-1,Dt=nt-1):(bt=1,Dt=0),wt=k(St("minTime")),Mt=k(St("maxTime")),Ct=St("columnFormat"),i?xt():function(){var e,r,a,o,h,m=gt+"-widget-header",D=gt+"-widget-content",S=St("slotMinutes")%15==0;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+m+"'>&nbsp;</th>",r=0;r<nt;r++)e+="<th class='fc- fc-col"+r+" "+m+"'/>";for(e+="<th class='fc-agenda-gutter "+m+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+m+"'>&nbsp;</th>",r=0;r<nt;r++)e+="<td class='fc- fc-col"+r+" "+D+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";i=t(e+="<td class='fc-agenda-gutter "+D+"'>&nbsp;</td></tr></tbody></table>").appendTo(n),s=i.find("thead"),c=s.find("th").slice(1,-1),l=i.find("tbody"),u=l.find("td").slice(0,-1),f=u.find("div.fc-day-content div"),d=u.eq(0),v=d.find("> div"),G(s.add(s.find("tr"))),G(l.add(l.find("tr"))),F=s.find("th:first"),N=i.find(".fc-agenda-gutter"),g=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),St("allDaySlot")?(p=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(g),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+m+" fc-agenda-axis'>"+St("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+m+" fc-agenda-gutter'>&nbsp;</th></tr></table>",y=t(e).appendTo(g),At((C=y.find("tr")).find("td")),F=F.add(y.find("th:first")),N=N.add(y.find("th.fc-agenda-gutter")),g.append("<div class='fc-agenda-divider "+m+"'><div class='fc-agenda-divider-inner'/></div>")):p=t([]);for(E=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(g),x=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(E),T=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(x),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=M(),o=b(w(a),Mt),b(a,wt),rt=0,r=0;a<o;r++)h=a.getMinutes(),e+="<tr class='fc-slot"+r+" "+(h?"fc-minor":"")+"'><th class='fc-agenda-axis "+m+"'>"+(S&&h?"&nbsp;":Nt(a,St("axisFormat")))+"</th><td class='"+D+"'><div style='position:relative'>&nbsp;</div></td></tr>",b(a,St("slotMinutes")),rt++;H=t(e+="</tbody></table>").appendTo(x),z=H.find("div:first"),Wt(H.find("td")),F=F.add(H.find("th:first"))}();!function(){var t,e,n,r,a=D(new Date);for(t=0;t<nt;t++)r=jt(t),(e=c.eq(t)).html(Nt(r,Ct)),n=u.eq(t),+r==+a?n.addClass(gt+"-state-highlight fc-today"):n.removeClass(gt+"-state-highlight fc-today"),K(e.add(n),r)}()},o.setWidth=function(e){j=e,ht.clear(),q=0,O(F.width("").each(function(e,n){q=Math.max(q,t(n).outerWidth())}),q);var n=E[0].clientWidth;(X=E.width()-n)?(O(N,X),N.show().prev().removeClass("fc-last")):N.hide().prev().addClass("fc-last");V=Math.floor((n-q)/nt),O(c.slice(0,-1),V)},o.setHeight=function(t,n){t===e&&(t=P);P=t,Lt={};var r=l.position().top,a=E.position().top,o=Math.min(t-r,H.height()+a+1);v.height(o-Y(d)),g.css("top",r),E.height(o-a-1),U=z.height()+1,n&&function(){var t=M(),e=w(t);e.setHours(St("firstHour"));var n=Jt(t,e)+1;function r(){E.scrollTop(n)}r(),setTimeout(r,0)}()},o.beforeHide=function(){et=E.scrollTop()},o.afterShow=function(){E.scrollTop(et)},o.defaultEventEnd=function(t){var e=w(t.start);if(t.allDay)return e;return b(e,St("defaultEventMinutes"))},o.timePosition=Jt,o.dayOfWeekCol=qt,o.dateCell=function(t){return{row:Math.floor(S(t,o.visStart)/7),col:qt(t.getDay())}},o.cellDate=Yt,o.cellIsAllDay=Pt,o.allDayRow=function(t){return C},o.allDayBounds=function(){return{left:q,right:j-X}},o.getHoverListener=function(){return vt},o.colContentLeft=function(t){return ht.left(t)},o.colContentRight=function(t){return ht.right(t)},o.getDaySegmentContainer=function(){return p},o.getSlotSegmentContainer=function(){return T},o.getMinMinute=function(){return wt},o.getMaxMinute=function(){return Mt},o.getBodyContent=function(){return x},o.getRowCnt=function(){return 1},o.getColCnt=function(){return nt},o.getColWidth=function(){return V},o.getSlotHeight=function(){return U},o.defaultSelectionEnd=function(t,e){if(e)return w(t);return b(w(t),St("slotMinutes"))},o.renderDayOverlay=Ot,o.renderSelection=function(t,e,n){n?St("allDaySlot")&&Ot(t,m(w(e),1),!0):Vt(t,e)},o.clearSelection=Xt,o.reportDayClick=Zt,o.dragStart=function(t,e,n){vt.start(function(t){if(kt(),t)if(Pt(t))Bt(t.row,t.col,t.row,t.col);else{var e=Yt(t),n=b(w(e),St("defaultEventMinutes"));It(e,n)}},e)},o.dragStop=function(t,e,n){var r=vt.stop();kt(),r&&Et("drop",t,Yt(r),Pt(r),e,n)},it.call(o,n,r,a),lt.call(o),ct.call(o),function(){var n=this;n.renderEvents=function(o,i){c(o);var s,l=o.length,u=[],d=[];for(s=0;s<l;s++)o[s].allDay?u.push(o[s]):d.push(o[s]);r("allDaySlot")&&(S(X(u),i),f());!function(n,o){var i,s,c,l,u,f,d,h,g,p,m,y,b,w,S,E,T,k,H,F,R,N,L=n.length,A="",W={},O={},B=v(),j=x();(F=r("isRTL"))?(R=-1,N=j-1):(R=1,N=0);for(i=0;i<L;i++)s=n[i],c=s.event,l=D(s.start,s.start),u=D(s.start,s.end),f=s.col,d=s.level,h=s.forward||0,g=M(f*R+N),p=C(f*R+N)-g,p=Math.min(p-6,.95*p),m=d?p/(d+h+1):h?2*(p/(h+1)-6):p,y=g+p/(d+h+1)*d*R+(F?p-m:0),s.top=l,s.left=y,s.outerWidth=m,s.outerHeight=u-l,A+=Q(c,s);for(B[0].innerHTML=A,b=B.children(),i=0;i<L;i++)s=n[i],c=s.event,w=t(b[i]),!1===(S=a("eventRender",c,c,w))?w.remove():(S&&!0!==S&&(w.remove(),w=t(S).css({position:"absolute",top:s.top,left:s.left}).appendTo(B)),s.element=w,c._id===o?G(c,w,s):w[0]._fci=i,z(c,w));for(_(B,n,G),i=0;i<L;i++)s=n[i],(w=s.element)&&(T=W[E=s.key=$(w[0])],s.vsides=T===e?W[E]=Y(w,!0):T,T=O[E],s.hsides=T===e?O[E]=I(w,!0):T,(k=w.find("div.fc-event-content")).length&&(s.contentTop=k[0].offsetTop));for(i=0;i<L;i++)s=n[i],(w=s.element)&&(w[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",H=Math.max(0,s.outerHeight-s.vsides),w[0].style.height=H+"px",c=s.event,s.contentTop!==e&&H-s.contentTop<10&&(w.find("div.fc-event-time").text(J(c.start,r("timeFormat"))+" - "+c.title),w.find("div.fc-event-title").remove()),a("eventAfterRender",c,c,w))}(function(e){var r,a,o,i,s,c,l=x(),u=y(),f=p(),d=b(w(n.visStart),u),v=t.map(e,U),h=[];for(r=0;r<l;r++){for(ot(a=W(A(e,v,d,b(w(d),f-u)))),o=0;o<a.length;o++)for(i=a[o],s=0;s<i.length;s++)(c=i[s]).col=r,c.level=o,h.push(c);m(d,1,!0)}return h}(d),i)},n.compileDaySegs=X,n.clearEvents=function(){l(),d().empty(),v().empty()},n.slotSegHtml=Q,n.bindDaySeg=function(t,e,n){o(t)&&function(t,e,n){var o,i,s,c=!0,l=r("isRTL")?-1:1,u=g(),f=T(),d=k(),v=y();function p(){c||(e.width(o).height("").draggable("option","grid",null),c=!0)}e.draggable({zIndex:9,opacity:r("dragOpacity","month"),revertDuration:r("dragRevertDuration"),start:function(v,g){a("eventDragStart",e,t,v,g),N(t,e),o=e.width(),u.start(function(a,o,u,v){P(),a?(i=!1,s=v*l,a.row?n?c&&(e.width(f-10),B(e,d*Math.round((t.end?(t.end-t.start)/h:r("defaultEventMinutes"))/r("slotMinutes"))),e.draggable("option","grid",[f,1]),c=!1):i=!0:(j(m(w(t.start),s),m(R(t),s)),p()),i=i||c&&!s):(p(),i=!0),e.draggable("option","revert",i)},v,"drag")},stop:function(n,o){if(u.stop(),P(),a("eventDragStop",e,t,n,o),i)p(),e.css("filter",""),F(t,e);else{var l=0;c||(l=Math.round((e.offset().top-H().offset().top)/d)*r("slotMinutes")+v-(60*t.start.getHours()+t.start.getMinutes())),L(this,t,s,l,c,n,o)}}})}(t,e,n.isStart);n.isEnd&&i(t)&&E(t,e,n);u(t,e)},st.call(n);var r=n.opt,a=n.trigger,o=n.isEventDraggable,i=n.isEventResizable,s=n.eventEnd,c=n.reportEvents,l=n.reportEventClear,u=n.eventElementHandlers,f=n.setHeight,d=n.getDaySegmentContainer,v=n.getSlotSegmentContainer,g=n.getHoverListener,p=n.getMaxMinute,y=n.getMinMinute,D=n.timePosition,M=n.colContentLeft,C=n.colContentRight,S=n.renderDaySegs,E=n.resizableDayEvent,x=n.getColCnt,T=n.getColWidth,k=n.getSlotHeight,H=n.getBodyContent,z=n.reportEventElement,F=n.showEvents,N=n.hideEvents,L=n.eventDrop,O=n.eventResize,j=n.renderDayOverlay,P=n.clearOverlays,q=n.calendar,J=q.formatDate,V=q.formatDates;function X(e){var r,a,o,i,s=W(A(e,t.map(e,R),n.visStart,n.visEnd)),c=s.length,l=[];for(r=0;r<c;r++)for(a=s[r],o=0;o<a.length;o++)(i=a[o]).row=0,i.level=r,l.push(i);return l}function U(t){return t.end?w(t.end):b(w(t.start),r("defaultEventMinutes"))}function Q(t,e){var n="<",a=t.url,s=tt(t,r),c=s?" style='"+s+"'":"",l=["fc-event","fc-event-skin","fc-event-vert"];return o(t)&&l.push("fc-event-draggable"),e.isStart&&l.push("fc-corner-top"),e.isEnd&&l.push("fc-corner-bottom"),l=l.concat(t.className),t.source&&(l=l.concat(t.source.className||[])),n+=a?"a href='"+Z(t.url)+"'":"a href='#'",n+=" class='"+l.join(" ")+"' style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+s+"'><div class='fc-event-inner fc-event-skin'"+c+"><div class='fc-event-head fc-event-skin'"+c+"><div class='fc-event-time'>"+Z(V(t.start,t.end,r("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+Z(t.title)+"</div></div><div class='fc-event-bg'></div></div>",e.isEnd&&i(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</a>"}function G(t,e,n){var c=e.find("div.fc-event-time");o(t)&&function(t,e,n){var o,i,s,c,l=!1,u=r("isRTL")?-1:1,f=g(),d=x(),v=T(),h=k();function p(e){var a,o=b(w(t.start),e);t.end&&(a=b(w(t.end),e)),n.text(V(o,a,r("timeFormat")))}function y(){l&&(n.css("display",""),e.draggable("option","grid",[v,h]),l=!1)}e.draggable({zIndex:9,scroll:!1,grid:[v,h],axis:1==d&&"y",opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(d,v){a("eventDragStart",e,t,d,v),N(t,e),o=e.position(),s=c=0,f.start(function(a,o,s,c){e.draggable("option","revert",!a),P(),a&&(i=c*u,r("allDaySlot")&&!a.row?(l||(l=!0,n.hide(),e.draggable("option","grid",null)),j(m(w(t.start),i),m(R(t),i))):y())},d,"drag")},drag:function(t,e){(s=Math.round((e.position.top-o.top)/h)*r("slotMinutes"))!=c&&(l||p(s),c=s)},stop:function(n,r){var c=f.stop();P(),a("eventDragStop",e,t,n,r),c&&(i||s||l)?L(this,t,i,l?0:s,l,n,r):(y(),e.css("filter",""),e.css(o),p(0),F(t,e))}})}(t,e,c),n.isEnd&&i(t)&&function(t,e,n){var o,i,c=k();e.resizable({handles:{s:"div.ui-resizable-s"},grid:c,start:function(n,r){o=i=0,N(t,e),e.css("z-index",9),a("eventResizeStart",this,t,n,r)},resize:function(a,l){(o=Math.round((Math.max(c,e.height())-l.originalSize.height)/c))!=i&&(n.text(V(t.start,o||t.end?b(s(t),r("slotMinutes")*o):null,r("timeFormat"))),i=o)},stop:function(n,i){a("eventResizeStop",this,t,n,i),o?O(this,t,0,r("slotMinutes")*o,n,i):(e.css("z-index",8),F(t,e))}})}(t,e,c),u(t,e)}}.call(o);var i,s,c,l,u,f,d,v,g,p,y,C,E,x,T,H,z,F,N,L,j,P,q,V,X,U,et,nt,rt,at,vt,ht,gt,pt,mt,yt,bt,Dt,wt,Mt,Ct,St=o.opt,Et=o.trigger,xt=o.clearEvents,Tt=o.renderOverlay,kt=o.clearOverlays,Ht=o.reportSelection,zt=o.unselect,Ft=o.daySelectionMousedown,Rt=o.slotSegHtml,Nt=r.formatDate,Lt={};function At(t){t.click(_t).mousedown(Ft)}function Wt(t){t.click(_t).mousedown(Ut)}function _t(t){if(!St("selectable")){var e=Math.min(nt-1,Math.floor((t.pageX-i.offset().left-q)/V)),n=jt(e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*St("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+wt),Et("dayClick",u[e],n,!1,t)}else Et("dayClick",u[e],n,!0,t)}}function Ot(t,e,n){n&&at.build();var r,a,i=w(o.visStart);yt?(r=S(e,i)*bt+Dt+1,a=S(t,i)*bt+Dt+1):(r=S(t,i),a=S(e,i)),(r=Math.max(0,r))<(a=Math.min(nt,a))&&At(Bt(0,r,0,a-1))}function Bt(t,e,n,r){var a=at.rect(t,e,n,r,g);return Tt(a,g)}function It(t,e){for(var n=w(o.visStart),r=m(w(n),1),a=0;a<nt;a++){var i=new Date(Math.max(n,t)),s=new Date(Math.min(r,e));if(i<s){var c=a*bt+Dt,l=at.rect(0,c,0,c,x),u=Jt(n,i),f=Jt(n,s);l.top=u,l.height=f-u,Wt(Tt(l,x))}m(n,1),m(r,1)}}function Yt(t){var e=jt(t.col),n=t.row;return St("allDaySlot")&&n--,n>=0&&b(e,wt+n*St("slotMinutes")),e}function jt(t){return m(w(o.visStart),t*bt+Dt)}function Pt(t){return St("allDaySlot")&&!t.row}function qt(t){return(t-Math.max(pt,mt)+nt)%nt*bt+Dt}function Jt(t,n){if(t=w(t,!0),n<b(w(t),wt))return 0;if(n>=b(w(t),Mt))return H.height();var r=St("slotMinutes"),a=60*n.getHours()+n.getMinutes()-wt,o=Math.floor(a/r),i=Lt[o];return i===e&&(i=Lt[o]=H.find("tr:eq("+o+") td div")[0].offsetTop),Math.max(0,Math.round(i-1+U*(a%r/r)))}function Vt(e,n){var r=St("selectHelper");if(at.build(),r){var a=S(e,o.visStart)*bt+Dt;if(a>=0&&a<nt){var i=at.rect(0,a,0,a,x),s=Jt(e,e),c=Jt(e,n);if(c>s){if(i.top=s,i.height=c-s,i.left+=2,i.width-=5,t.isFunction(r)){var l=r(e,n);l&&(i.position="absolute",i.zIndex=8,L=t(l).css(i).appendTo(x))}else i.isStart=!0,i.isEnd=!0,(L=t(Rt({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},i))).css("opacity",St("dragOpacity"));L&&(Wt(L),x.append(L),O(L,i.width,!0),B(L,i.height,!0))}}}else It(e,n)}function Xt(){kt(),L&&(L.remove(),L=null)}function Ut(e){var n;1==e.which&&St("selectable")&&(zt(e),vt.start(function(t,e){if(Xt(),t&&t.col==e.col&&!Pt(t)){var r=Yt(e),a=Yt(t);Vt((n=[r,b(w(r),St("slotMinutes")),a,b(w(a),St("slotMinutes"))].sort(J))[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){vt.stop(),n&&(+n[0]==+n[1]&&Zt(n[0],!1,t),Ht(n[0],n[3],!1,t))}))}function Zt(t,e,n){Et("dayClick",u[qt(t.getDay())],t,e,n)}Q(n.addClass("fc-agenda")),at=new ut(function(e,n){var r,a,o;c.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),St("allDaySlot")&&(a=(r=C).offset().top,e[0]=[a,a+r.outerHeight()]);var i=x.offset().top,s=E.offset().top,l=s+E.outerHeight();function u(t){return Math.max(s,Math.min(l,t))}for(var f=0;f<rt;f++)e.push([u(i+U*f),u(i+U*(f+1))])}),vt=new ft(at),ht=new dt(function(t){return f.eq(t)})}function ot(t){var e,n,r,a,o,i;for(e=t.length-1;e>0;e--)for(a=t[e],n=0;n<a.length;n++)for(o=a[n],r=0;r<t[e-1].length;r++)L(o,i=t[e-1][r])&&(i.forward=Math.max(i.forward||0,(o.forward||0)+1))}function it(t,n,r){var a=this;a.element=t,a.calendar=n,a.name=r,a.opt=d,a.trigger=v,a.isEventDraggable=function(t){return h(t)&&!d("disableDragging")},a.isEventResizable=function(t){return h(t)&&!d("disableResizing")},a.reportEvents=function(t){c={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],c[n._id]?c[n._id].push(n):c[n._id]=[n]},a.eventEnd=g,a.reportEventElement=function(t,e){l.push(e),u[t._id]?u[t._id].push(e):u[t._id]=[e]},a.reportEventClear=function(){l=[],u={}},a.eventElementHandlers=function(t,e){e.click(function(n){if(!e.hasClass("ui-draggable-dragging")&&!e.hasClass("ui-resizable-resizing"))return v("eventClick",this,t,n)}).hover(function(e){v("eventMouseover",this,t,e)},function(e){v("eventMouseout",this,t,e)})},a.showEvents=function(t,e){p(t,e,"show")},a.hideEvents=function(t,e){p(t,e,"hide")},a.eventDrop=function(t,e,n,r,a,o,i){var l=e.allDay,u=e._id;y(c[u],n,r,a),v("eventDrop",t,e,n,r,a,function(){y(c[u],-n,-r,l),s(u)},o,i),s(u)},a.eventResize=function(t,e,n,r,a,o){var i=e._id;D(c[i],n,r),v("eventResize",t,e,n,r,function(){D(c[i],-n,-r),s(i)},a,o),s(i)};var o=a.defaultEventEnd,i=n.normalizeEvent,s=n.reportEventChange,c={},l=[],u={},f=n.options;function d(t,e){var n=f[t];return"object"==typeof n?U(n,e||r):n}function v(t,e){return n.trigger.apply(n,[t,e||a].concat(Array.prototype.slice.call(arguments,2),[a]))}function h(t){return nt(t.editable,(t.source||{}).editable,d("editable"))}function g(t){return t.end?w(t.end):o(t)}function p(t,e,n){var r,a=u[t._id],o=a.length;for(r=0;r<o;r++)e&&a[r][0]==e[0]||a[r][n]()}function y(t,n,r,a){r=r||0;for(var o,s=t.length,c=0;c<s;c++)o=t[c],a!==e&&(o.allDay=a),b(m(o.start,n,!0),r),o.end&&(o.end=b(m(o.end,n,!0),r)),i(o,f)}function D(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)(r=t[o]).end=b(m(g(r),e,!0),n),i(r,f)}}function st(){var n=this;n.renderDaySegs=function(t,e){var n,r,a,o,i,s,l,u=C(),f=d(),h=v(),g=0,p=t.length;for(u[0].innerHTML=H(t),z(t,u.children()),function(t){var e,n,r,a=t.length;for(e=0;e<a;e++)n=t[e],(r=n.element)&&c(n.event,r)}(t),function(t,e,n){var r,a,o,i,s=t.length;for(r=0;r<s;r++)a=t[r],(o=a.element)&&((i=a.event)._id===n?S(i,o,a):o[0]._fci=r);_(e,t,S)}(t,u,e),F(t),R(t),N(t),n=L(),r=0;r<f;r++){for(0,a=[],o=0;o<h;o++)a[o]=0;for(;g<p&&(i=t[g]).row==r;){for(s=V(a.slice(i.startCol,i.endCol)),i.top=s,s+=i.outerHeight,l=i.startCol;l<i.endCol;l++)a[l]=s;g++}n[r].height(V(a))}W(t,A(n))},n.resizableDayEvent=function(e,o,i){var c=r("isRTL"),h=c?"w":"e",g=o.find("div.ui-resizable-"+h),p=!1;Q(o),o.mousedown(function(t){t.preventDefault()}).click(function(t){p&&(t.preventDefault(),t.stopImmediatePropagation())}),g.mousedown(function(r){if(1==r.which){p=!0;var g,y,b=n.getHoverListener(),S=d(),E=v(),_=c?-1:1,O=c?E-1:0,B=o.css("top"),I=t.extend({},e),Y=D(e.start);k(),t("body").css("cursor",h+"-resize").one("mouseup",function(n){a("eventResizeStop",this,e,n),t("body").css("cursor",""),b.stop(),T(),g&&f(this,e,g,0,n);setTimeout(function(){p=!1},0)}),a("eventResizeStart",this,e,r),b.start(function(n,r){if(n){var a=Math.max(Y.row,n.row),o=n.col;1==S&&(a=0),a==Y.row&&(o=c?Math.min(Y.col,o):Math.max(Y.col,o)),g=7*a+o*_+O-(7*r.row+r.col*_+O);var f=m(s(e),g,!0);if(g){I.end=f;var d=y;(y=function(e,n,r){var a,o,i,s=t("<div/>"),c=C(),l=e.length;for(s[0].innerHTML=H(e),a=s.children(),c.append(a),z(e,a),F(e),R(e),N(e),W(e,A(L())),a=[],o=0;o<l;o++)(i=e[o].element)&&(e[o].row===n&&i.css("top",r),a.push(i[0]));return t(a)}(M([I]),i.row,B)).find("*").css("cursor",h+"-resize"),d&&d.remove(),u(e)}else y&&(l(e),y.remove(),y=null);T(),x(e.start,m(w(f),1))}},r)}})};var r=n.opt,a=n.trigger,o=n.isEventDraggable,i=n.isEventResizable,s=n.eventEnd,c=n.reportEventElement,l=n.showEvents,u=n.hideEvents,f=n.eventResize,d=n.getRowCnt,v=n.getColCnt,h=(n.getColWidth,n.allDayRow),g=n.allDayBounds,p=n.colContentLeft,y=n.colContentRight,b=n.dayOfWeekCol,D=n.dateCell,M=n.compileDaySegs,C=n.getDaySegmentContainer,S=n.bindDaySeg,E=n.calendar.formatDates,x=n.renderDayOverlay,T=n.clearOverlays,k=n.clearSelection;function H(t){var e,n,a,s,c,l,u,f,d,v,h=r("isRTL"),m=t.length,D=g(),w=D.left,M=D.right,C="";for(e=0;e<m;e++)a=(n=t[e]).event,c=["fc-event","fc-event-skin","fc-event-hori"],o(a)&&c.push("fc-event-draggable"),h?(n.isStart&&c.push("fc-corner-right"),n.isEnd&&c.push("fc-corner-left"),l=b(n.end.getDay()-1),u=b(n.start.getDay()),f=n.isEnd?p(l):w,d=n.isStart?y(u):M):(n.isStart&&c.push("fc-corner-left"),n.isEnd&&c.push("fc-corner-right"),l=b(n.start.getDay()),u=b(n.end.getDay()-1),f=n.isStart?p(l):w,d=n.isEnd?y(u):M),c=c.concat(a.className),a.source&&(c=c.concat(a.source.className||[])),s=a.url,v=tt(a,r),C+=s?"<a href='"+Z(s)+"'":"<a href='#'",C+=" class='"+c.join(" ")+"' style='position:absolute;z-index:8;left:"+f+"px;"+v+"'><div class='fc-event-inner fc-event-skin'"+(v?" style='"+v+"'":"")+">",!a.allDay&&n.isStart&&(C+="<span class='fc-event-time'>"+Z(E(a.start,a.end,r("timeFormat")))+"</span>"),C+="<span class='fc-event-title'>"+Z(a.title)+"</span></div>",n.isEnd&&i(a)&&(C+="<div class='ui-resizable-handle ui-resizable-"+(h?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),C+="</a>",n.left=f,n.outerWidth=d-f,n.startCol=l,n.endCol=u+1;return C}function z(e,n){var r,o,i,s,c,l=e.length;for(r=0;r<l;r++)i=(o=e[r]).event,s=t(n[r]),!1===(c=a("eventRender",i,i,s))?s.remove():(c&&!0!==c&&(c=t(c).css({position:"absolute",left:o.left}),s.replaceWith(c),s=c),o.element=s)}function F(t){var n,r,a,o,i,s=t.length,c={};for(n=0;n<s;n++)(a=(r=t[n]).element)&&((i=c[o=r.key=$(a[0])])===e&&(i=c[o]=I(a,!0)),r.hsides=i)}function R(t){var e,n,r,a=t.length;for(e=0;e<a;e++)(r=(n=t[e]).element)&&(r[0].style.width=Math.max(0,n.outerWidth-n.hsides)+"px")}function N(t){var n,r,a,o,i,s=t.length,c={};for(n=0;n<s;n++)(a=(r=t[n]).element)&&((i=c[o=r.key])===e&&(i=c[o]=j(a)),r.outerHeight=a[0].offsetHeight+i)}function L(){var t,e=d(),n=[];for(t=0;t<e;t++)n[t]=h(t).find("td:first div.fc-day-content > div");return n}function A(t){var e,n=t.length,r=[];for(e=0;e<n;e++)r[e]=t[e][0].offsetTop;return r}function W(t,e){var n,r,o,i,s=t.length;for(n=0;n<s;n++)(o=(r=t[n]).element)&&(o[0].style.top=e[r.row]+(r.top||0)+"px",i=r.event,a("eventAfterRender",i,i,o))}}function ct(){var e=this;e.select=function(t,e,n){c(),e||(e=a(t,n));o(t,e,n),l(t,e,n)},e.unselect=c,e.reportSelection=l,e.daySelectionMousedown=function(r){var a=e.cellDate,s=e.cellIsAllDay,u=e.getHoverListener(),f=e.reportDayClick;if(1==r.which&&n("selectable")){c(r);var d;u.start(function(t,e){i(),t&&s(t)?(d=[a(e),a(t)].sort(J),o(d[0],d[1],!0)):d=null},r),t(document).one("mouseup",function(t){u.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),l(d[0],d[1],!0,t))})}};var n=e.opt,r=e.trigger,a=e.defaultSelectionEnd,o=e.renderSelection,i=e.clearSelection,s=!1;function c(t){s&&(s=!1,i(),r("unselect",null,t))}function l(t,e,n,a){s=!0,r("select",null,t,e,n,a)}n("selectable")&&n("unselectAuto")&&t(document).mousedown(function(e){var r=n("unselectCancel");r&&t(e.target).parents(r).length||c(e)})}function lt(){this.renderOverlay=function(r,a){var o=n.shift();o||(o=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));o[0].parentNode!=a[0]&&o.appendTo(a);return e.push(o.css(r).show()),o},this.clearOverlays=function(){var t;for(;t=e.shift();)n.push(t.hide().unbind())};var e=[],n=[]}function ut(t){var e,n,r=this;r.build=function(){t(e=[],n=[])},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,c=-1;for(a=0;a<o;a++)if(r>=e[a][0]&&r<e[a][1]){s=a;break}for(a=0;a<i;a++)if(t>=n[a][0]&&t<n[a][1]){c=a;break}return s>=0&&c>=0?{row:s,col:c}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function ft(n){var r,a,o,i;function s(t){var r;(r=t).pageX===e&&(r.pageX=r.originalEvent.pageX,r.pageY=r.originalEvent.pageY);var s=n.cell(t.pageX,t.pageY);(!s!=!i||s&&(s.row!=i.row||s.col!=i.col))&&(s?(o||(o=s),a(s,o,s.row-o.row,s.col-o.col)):a(s,o),i=s)}this.start=function(e,c,l){a=e,o=i=null,n.build(),s(c),r=l||"mousemove",t(document).bind(r,s)},this.stop=function(){return t(document).unbind(r,s),i}}function dt(t){var n=this,r={},a={},o={};function i(e){return r[e]=r[e]||t(e)}n.left=function(t){return a[t]=a[t]===e?i(t).position().left:a[t]},n.right=function(t){return o[t]=o[t]===e?n.left(t)+i(t).width():o[t]},n.clear=function(){r={},a={},o={}}}a.applyAll=et,o.month=function(t,e){var n=this;n.render=function(t,e){e&&(p(t,e),t.setDate(1));var i=w(t,!0);i.setDate(1);var s=p(w(i),1),c=w(i),l=w(s),u=r("firstDay"),f=r("weekends")?0:1;f&&(C(c),C(l,-1,!0));m(c,-(c.getDay()-Math.max(u,f)+7)%7),m(l,(7-l.getDay()+Math.max(u,f))%7);var v=Math.round((l-c)/(7*d));"fixed"==r("weekMode")&&(m(l,7*(6-v)),v=6);n.title=o(i,r("titleFormat")),n.start=i,n.end=s,n.visStart=c,n.visEnd=l,a(6,v,f?5:7,!0)},rt.call(n,t,e,"month");var r=n.opt,a=n.renderBasic,o=e.formatDate},o.basicWeek=function(t,e){var n=this;n.render=function(t,e){e&&m(t,7*e);var i=m(w(t),-(t.getDay()-r("firstDay")+7)%7),s=m(w(i),7),c=w(i),l=w(s),u=r("weekends");u||(C(c),C(l,-1,!0));n.title=o(c,m(w(l),-1),r("titleFormat")),n.start=i,n.end=s,n.visStart=c,n.visEnd=l,a(1,1,u?7:5,!1)},rt.call(n,t,e,"basicWeek");var r=n.opt,a=n.renderBasic,o=e.formatDates},o.basicDay=function(t,e){var n=this;n.render=function(t,e){e&&(m(t,e),r("weekends")||C(t,e<0?-1:1));n.title=o(t,r("titleFormat")),n.start=n.visStart=w(t,!0),n.end=n.visEnd=m(w(n.start),1),a(1,1,1,!1)},rt.call(n,t,e,"basicDay");var r=n.opt,a=n.renderBasic,o=e.formatDate},i({weekMode:"fixed"}),o.agendaWeek=function(t,e){var n=this;n.render=function(t,e){e&&m(t,7*e);var i=m(w(t),-(t.getDay()-r("firstDay")+7)%7),s=m(w(i),7),c=w(i),l=w(s),u=r("weekends");u||(C(c),C(l,-1,!0));n.title=o(c,m(w(l),-1),r("titleFormat")),n.start=i,n.end=s,n.visStart=c,n.visEnd=l,a(u?7:5)},at.call(n,t,e,"agendaWeek");var r=n.opt,a=n.renderAgenda,o=e.formatDates},o.agendaDay=function(t,e){var n=this;n.render=function(t,e){e&&(m(t,e),r("weekends")||C(t,e<0?-1:1));var i=w(t,!0),s=m(w(i),1);n.title=o(t,r("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=s,a(1)},at.call(n,t,e,"agendaDay");var r=n.opt,a=n.renderAgenda,o=e.formatDate},i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);